let botFactory=function(){function BotUI(){this.maindiv=document.createElement("DIV"),this.botUserId=null,this.sessionAttributes={},this.slideIndex=[],this.slideDivId="oibot_slides_",this.initialChatScript=[{isbefore:!0,text:"Hi, I'm MattressBot! I'm here to help you find the perfect mattress so you can get a great night's "},{isbefore:!1,text:"Are you ready to find your mattress?"}],this.assetsUrl="https://mattressassets.s3.amazonaws.com/assets/",this.chatHTML='\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n              <div class="container">\n                <div class="row">\n                  <div id="oibot_smallchat">\n                    <div class="layout layout-open layout-expand layout-right" style="border-radius: 10px;">\n                      <div class="messenger_messenger">\n                        <div class="messenger_header">\n                          <span id="oibot_headertitle" class="headertitle">\n                            <span class="welcome">Welcome to Gates</span>\n                            <br/>\n                            <span>\n                              <span class="powered_by">POWERED BY</span>\n                              <span>\n                                <a id="xsell" href="https://xselltechnologies.com" target="_blank">XSELL Technologies</a>\n                              </span>\n                            </span>\n                          </span>\n\n                          <div id="oibot_minimize" class="chat_minimize_icon oibot_icon">\n                            <svg viewBox="90 100 375 375">\n                              <g id="oibot_minimize_thin">\n                                <path fill="#ffffff" d="M1779.3,853.3H12.7v85.4h1766.7V853.3z"\n                                  transform="scale(.215, -.215) translate(400, -2300)"></path>\n                              </g>\n                            </svg>\n                          </div>\n\n                          <div id="oibot_light" class="chat_minimize_icon oibot_icon tooltip">\n                            <img src="'+this.assetsUrl+'iconfinder_moon_dark_mode_night_5402400.png" width="14px">\n                            \x3c!--<span class="tooltiptext">Toggle Dark Mode</span>--\x3e\n                          </div>\n                          <div id="oibot_closeicon" class="chat_close_icon oibot_icon">\n                           <img src="'+this.assetsUrl+'close+(11)+copy-min.png" width="10px">\n                          </div>\n                        </div>\n                        <div id="oibot_messenger_content" class="messenger_content">\n                          <div id="oibot_conversation" class="messages">\n                          </div>\n                          <div id="oibot_closechat" class="Input Input-blank">\n                            <div class="closechat">\n                              Do you want to close the chat ?\n                            </div>\n                            <div class="buttons">\n                              <div id="oibot_canceldiv" class="suggestionbutton close">CANCEL</div>\n                              <div id="oibot_okdiv" class="suggestionbutton close">CONFIRM</div>\n                            </div>\n                          </div>\n\n                          <div id="oibot_userinputdiv" class="Input Input-blank">\n                            <div id="oibot_container">\n                              <div class="container_input">\n                                \x3c!--<form id="oibot_chatform" class="Input_field">--\x3e\n                                  <input type="text" class="Input_field"\n                                    id="oibot_userinput" size="80" value="" placeholder="Enter your message">\n                                \x3c!--</form>--\x3e\n                              </div>\n                              <div class="container_push">\n                                <button id="oibot_pushchat" class="Input_button Input_button-send">\n                                  <div class="oibot_icon">\n                                   <img src="'+this.assetsUrl+'right-arrow+(11)-min.png" class="sendbutton" width="18px">\n                                </button>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div id="oibot_popup">\n                        \x3c!-- <div class="chathead" style="background-image: url(\''+this.assetsUrl+'avatar.jpeg\');"></div>--\x3e\n                        <div class="chathead" style="background-image: url(\''+this.assetsUrl+'chatbot.png\');"></div>\n                        <span class="text">Hi I\'m MattressBot, have a question? I can help you, text me here!</span>\n                      </div>\n                  </div>\n                  <div id="oibot_chaton" class="chat_on">\n                    <span class="chat_on_icon">\n                      <svg viewBox="0 0 600 600">\n                        <defs>\n                          <filter id="oibot_dropshadow" height="140%">\n                            <feGaussianBlur in="SourceAlpha" stdDeviation="15"></feGaussianBlur>\n                            <feOffset result="offsetblur" dx="10" dy="10"></feOffset>\n                            <feComponentTransfer>\n                              <feFuncA type="linear" slope="0.8"></feFuncA>\n                            </feComponentTransfer>\n                            <feMerge>\n                              <feMergeNode></feMergeNode>\n                              <feMergeNode in="SourceGraphic"></feMergeNode>\n                            </feMerge>\n                          </filter>\n                        </defs>\n                        <g id="oibot_comments-o" class="designstudio-container">\n                          <circle class="designstudio-circle" cx="50%" cy="50%" r="260" fill="#3498db" linejoin="round"\n                            stroke="#ffffff" stroke-width="0" fill-opacity="1" position="absolute"></circle>\n                          <path fill="#ffffff"\n                            d="M704 1152q-153 0 -286 -52t-211.5 -141t-78.5 -191q0 -82 53 -158t149 -132l97 -56l-35 -84q34 20 62 39l44 31l53 -10q78 -14 153 -14q153 0 286 52t211.5 141t78.5 191t-78.5 191t-211.5 141t-286 52zM704 1280q191 0 353.5 -68.5t256.5 -186.5t94 -257t-94 -257 t-256.5 -186.5t-353.5 -68.5q-86 0 -176 16q-124 -88 -278 -128q-36 -9 -86 -16h-3q-11 0 -20.5 8t-11.5 21q-1 3 -1 6.5t0.5 6.5t2 6l2.5 5t3.5 5.5t4 5t4.5 5t4 4.5q5 6 23 25t26 29.5t22.5 29t25 38.5t20.5 44q-124 72 -195 177t-71 224q0 139 94 257t256.5 186.5 t353.5 68.5zM1526 111q10 -24 20.5 -44t25 -38.5t22.5 -29t26 -29.5t23 -25q1 -1 4 -4.5t4.5 -5t4 -5t3.5 -5.5l2.5 -5t2 -6t0.5 -6.5t-1 -6.5q-3 -14 -13 -22t-22 -7q-50 7 -86 16q-154 40 -278 128q-90 -16 -176 -16q-271 0 -472 132q58 -4 88 -4q161 0 309 45t264 129 q125 92 192 212t67 254q0 77 -23 152q129 -71 204 -178t75 -230q0 -120 -71 -224.5t-195 -176.5z"\n                            transform="scale(.195, -.195) translate(600, -2000)"></path>\n                        </g>\n                      </svg>\n                    </span>\n                  </div>\n                </div>\n              </div>',this.stylesrc="\n              div#oibot_maindiv * {\n                box-sizing: content-box;\n                line-height: normal;\n              }\n              div#oibot_maindiv .Input * {\n                box-sizing: border-box;\n              }\n\n              #oibot_smallchat {\n                font-family: \"Lato\", sans-serif;\n                font-weight: normal;\n              }\n              .oibot_userrequest {\n                padding: 10px;\n                border-radius: 10px 0 10px 10px;\n                max-width: 75%;\n                margin-left: auto;\n                background-color: #141414;\n                color: #FFFFFF;\n              }\n              .dark-mode .oibot_userrequest {\n                background-color: #FFFFFF;\n                color: #141414;\n              }\n\n              .sendbutton{\n                position:absolute;\n                right:14px;\n              }\n\n              #oibot_maindiv .tooltip {\n                position: relative;\n                display: inline-block;\n                opacity: 1;\n              }\n              #oibot_maindiv .tooltip .tooltiptext {\n                visibility: hidden;\n                margin-top:34px;\n                width: 41px;\n                background-color: #3080E2;\n                color: white;\n                text-align: center;\n                padding: 0 0;\n                position: absolute;\n                z-index: 1;\n              }\n              #oibot_maindiv .tooltip:hover .tooltiptext {\n                visibility: visible;\n              }\n\n              .chathead{\n                background-color: #e4e9f0;\n                background-size: cover;\n                border-radius: 45px;\n                width: 45px;\n                height: 45px;\n                display: inline-block;\n              }\n              #oibot_popup {\n                align-items: flex-end;\n                display: block;\n                flex-direction: column;\n                width: 100%;\n                max-width: 300px;\n                padding-top: 20px;\n                z-index: 10;\n              }\n              #oibot_popup {\n    //            display:flex;\n                border:1px solid #3497db;\n                color: #3497db;\n                border-radius:13px;\n                box-sizing:border-box;\n                background-color:white;\n    //            box-shadow:0 13px 27px 0 #5b63da;\n                max-width:290px;\n                padding:10px;\n                height:65px;\n                position: fixed;\n                font-size:17px;\n                right: 32px;\n                bottom: 108px;\n              }\n              #oibot_popup::after {\n                content:'';\n                width:20px;\n                height:20px;\n                border-radius:4px;\n                z-index:-1;\n                background-color:white;\n                position:absolute;\n                bottom:-6px;\n                right:11px;\n                transform:rotate(45deg);\n              }\n              #oibot_popup span {\n                display: inline-block;\n              }\n              #oibot_popup span.text {\n                width: calc(100% - 70px);\n                margin-left: 15px;\n              }\n\n              #oibot_maindiv {\n                font-size:15px;\n                font-style: normal;\n              }\n\n              #oibot_container {\n                display: flex;\n              }\n              .container_input {\n                width: calc(100% - 50px);\n                height: 30px;\n                margin-left: 10px;\n              }\n              .container_push {\n                width: 40px;\n                margin-top: 5px;\n              }\n\n              a {\n                font-size: 15px;\n              }\n              a:hover {\n                color: red;\n              }\n              a:link {\n                color: blue;\n              }\n              a:active {\n                color: blue;\n              }\n              a:visited {\n                color: blue;\n              }\n\n              .oibot_botresponse {\n                margin: 0px auto 0px 20px;\n                padding: 10px;\n                border-radius: 0 10px 10px 10px;\n                min-width: 60%;\n                max-width: 85%;\n                background-color: #F0F0F0;\n                color: #000000;\n              }\n              .dark-mode .oibot_botresponse {\n                background-color: #a0a0a0;\n                color: #FFFFFF;\n              }\n              .botOptionResponse {\n                margin: 0px;\n              }\n              .optionbutton {\n                background-color: #3080E2;\n                color: #FFFFFF;\n                padding: 5px;\n                margin: 10px auto;\n                width: 80%;\n                border-radius: 20px;\n                text-align: center;\n                cursor: pointer;\n              }\n              .botSuggestionResponse {\n                width: 100%;\n                overflow-x: hidden;\n                overflow-y: hidden;\n\n                min-height: 60px;\n                margin: 5px auto 0 0px;\n                font-size: 14px;\n                font-style: italic;\n                position:relative;\n              }\n              .botError {\n                margin: 4px;\n                margin-left: 80px;\n                padding: 4px 10px 4px 10px;\n                border-radius: 4px;\n                text-align: right;\n                min-width: 60%;\n                max-width: 85%;\n                float: right;\n                background-color: #f77;\n              }\n              .sugbutton {\n                background-color: #7b8189; /* Green */\n                border: none;\n                color: white;\n                padding: 10px;\n                text-align: center;\n                text-decoration: none;\n                display: inline-block;\n                font-size: 17px;\n                margin: 4px 2px;\n                cursor: pointer;\n                border-radius: 25%;\n              }\n\n              #oibot_smallchat .messages, #oibot_smallchat .messages_list {\n                -webkit-box-flex: 1;\n                -webkit-flex-grow: 1;\n                -ms-flex-positive: 1;\n                flex-grow: 1;\n              }\n              #oibot_smallchat .messages p.botOptionResponse span {\n                display: block;\n              }\n              #oibot_smallchat .messages p.botSuggestionResponse span {\n                display: inline-block;\n              }\n              .chat_close_icon {\n                cursor:pointer;\n                color: #f77;\n                font-size:10px;\n              }\n              .chat_minimize_icon {\n                cursor:pointer;\n                color: #f77;\n                font-size:10px;\n                margin-right:15px;\n              }\n              .headertitle {\n                width:calc(100% - 60px);\n                cursor:pointer;\n                font-size:19px;\n              }\n              .headertitle .welcome {\n                margin-left: 85px;\n              }\n              .headertitle > span:last-child {\n                margin-left: 80px;\n                display: inline;\n              }\n              .headertitle .powered_by {\n                opacity: 0.8;\n                font-size:10px;\n              }\n              .headertitle a {\n                text-decoration:none;\n                color:#FFFFFF;\n                font-size:11px;\n                font-weight: bold;\n              }\n              .chat_on {\n                position: fixed;\n                z-index: 10;\n                width: 70px;\n                height: 70px;\n                right: 15px;\n                bottom: 20px;\n                background-color: #4286f4;\n                color: #fff;\n                border-radius: 50%;\n                text-align: center;\n                padding: 3px;\n                padding-top: 5px;\n                box-shadow: 0 2px 4px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12)!important;\n                cursor: pointer;\n                display: block;\n              }\n\n              #oibot_smallchat .layout {\n                pointer-events:auto;\n                box-sizing:content-box!important;\n                z-index:999999999;\n                position:fixed;\n                bottom:20px;\n\n                min-width:50px;\n                max-width:300px;\n                max-height:30px;\n                display:-webkit-box;\n                display:-webkit-flex;\n                display:-ms-flexbox;\n                display:flex;\n                -webkit-box-orient:vertical;\n                -webkit-box-direction:normal;\n                -webkit-flex-direction:column;\n                -ms-flex-direction:column;\n                flex-direction:column;\n                -webkit-box-pack:end;\n                -webkit-justify-content:flex-end;\n                -ms-flex-pack:end;\n                justify-content:flex-end;\n                border-radius:50px;\n                box-shadow:5px 0 20px 5px rgba(0,0,0,.1);\n                -webkit-animation:appear .15s cubic-bezier(.25,.25,.5,1.1);\n                animation:appear .15s cubic-bezier(.25,.25,.5,1.1);\n                -webkit-animation-fill-mode:forwards;\n                animation-fill-mode:forwards;\n                opacity:0;\n                -webkit-transition:right .1s cubic-bezier(.25,.25,.5,1),bottom .1s cubic-bezier(.25,.25,.5,1),min-width .2s\n                cubic-bezier(.25,.25,.5,1),max-width .2s cubic-bezier(.25,.25,.5,1),min-height .2s cubic-bezier(.25,.25,.5,1),max-height\n                .2s cubic-bezier(.25,.25,.5,1),border-radius 50ms cubic-bezier(.25,.25,.5,1) .15s,background-color 50ms\n                cubic-bezier(.25,.25,.5,1) .15s,color 50ms cubic-bezier(.25,.25,.5,1) .15s;\n                transition:right .1s cubic-bezier(.25,.25,.5,1),bottom .1s cubic-bezier(.25,.25,.5,1),min-width .2s\n                cubic-bezier(.25,.25,.5,1),max-width .2s cubic-bezier(.25,.25,.5,1),min-height .2s cubic-bezier(.25,.25,.5,1),max-height\n                .2s cubic-bezier(.25,.25,.5,1),border-radius 50ms cubic-bezier(.25,.25,.5,1) .15s,background-color 50ms\n                cubic-bezier(.25,.25,.5,1) .15s,color 50ms cubic-bezier(.25,.25,.5,1) .15s\n              }\n\n              #oibot_smallchat .layout-right {\n                right:20px;\n              }\n\n              #oibot_smallchat .layout-expand {\n                height:510px;\n                min-height:510px;\n                width: 380px;\n                min-width: 380px;\n                overflow: hidden;\n                display:none;\n              }\n              #oibot_smallchat .layout-mobile {\n                bottom:10px;\n              }\n              #oibot_smallchat .layout-mobile.layout-open {\n                width:calc(100% - 20px);\n                min-width:calc(100% - 20px);\n              }\n              #oibot_smallchat .layout-mobile.layout-expand {\n                bottom:0;\n                height:100%;\n                min-height:100%;\n                width:100%;\n                min-width:100%;\n                border-radius:0!important\n              }\n              @-webkit-keyframes appear {\n                0% {\n                  opacity:0;\n                  -webkit-transform:scale(0);\n                  transform:scale(0)\n                }\n                to {\n                  opacity:1;\n                  -webkit-transform:scale(1);\n                  transform:scale(1)\n                }\n              }\n              @keyframes appear {\n                0% {\n                  opacity:0;\n                  -webkit-transform:scale(0);\n                  transform:scale(0)\n                }\n                to {\n                  opacity:1;\n                  -webkit-transform:scale(1);\n                  transform:scale(1)\n                }\n              }\n              #oibot_smallchat .messenger_messenger {\n                position:relative;\n                height:100%;\n                width:100%;\n                min-width:300px;\n                -webkit-box-orient:vertical;\n                -webkit-box-direction:normal;\n                -webkit-flex-direction:column;\n                -ms-flex-direction:column;\n                flex-direction:column\n              }\n              #oibot_smallchat .messenger_header,#oibot_smallchat .messenger_messenger {\n                display:-webkit-box;\n                display:-webkit-flex;\n                display:-ms-flexbox;\n                display:flex\n              }\n              #oibot_smallchat .messenger_header {\n                -webkit-box-align:center;\n                -webkit-align-items:center;\n                -ms-flex-align:center;\n                align-items:center;\n                padding-left:10px;\n                padding-right:10px;\n                height:60px;\n                -webkit-flex-shrink:0;\n                -ms-flex-negative:0;\n                flex-shrink:0;\n                background-color: #3080E2;\n                color: #FFFFFF;\n              }\n\n\n              #oibot_smallchat .messenger_header h4 {\n                opacity:0;\n                font-size:16px;\n                -webkit-animation:slidein .15s .3s;\n                animation:slidein .15s .3s;\n                -webkit-animation-fill-mode:forwards;\n                animation-fill-mode:forwards\n              }\n\n              #oibot_smallchat .messenger_prompt {\n                margin:0;\n                font-size:16px;\n                line-height:18px;\n                font-weight:400;\n                overflow:hidden;\n                white-space:nowrap;\n                text-overflow:ellipsis\n              }\n\n              @-webkit-keyframes slidein {\n                0% {\n                  opacity:0;\n                  -webkit-transform:translateX(10px);\n                  transform:translateX(10px)\n                }\n                to {\n                  opacity:1;\n                  -webkit-transform:translateX(0);\n                  transform:translateX(0)\n                }\n              }\n              @keyframes slidein {\n                0% {\n                  opacity:0;\n                  -webkit-transform:translateX(10px);\n                  transform:translateX(10px)\n                }\n                to {\n                  opacity:1;\n                  -webkit-transform:translateX(0);\n                  transform:translateX(0)\n                }\n              }\n              #oibot_smallchat .messenger_content {\n                height: 450px;\n                background-color: #FFFFFF;\n                -webkit-box-flex: 1;\n                -webkit-flex-grow: 1;\n                -ms-flex-positive: 1;\n                flex-grow: 1;\n                display: -webkit-box;\n                display: -webkit-flex;\n                display: -ms-flexbox;\n                display: flex;\n                -webkit-box-orient: vertical;\n                -webkit-box-direction: normal;\n                -webkit-flex-direction: column;\n                -ms-flex-direction: column;\n                flex-direction: column;\n              }\n              #oibot_smallchat .messages {\n                position: relative;\n                -webkit-flex-shrink: 1;\n                -ms-flex-negative: 1;\n                flex-shrink: 1;\n                display: -webkit-box;\n                display: -webkit-flex;\n                display: -ms-flexbox;\n                display: flex;\n                -webkit-box-orient: vertical;\n                -webkit-box-direction: normal;\n                -webkit-flex-direction: column;\n                -ms-flex-direction: column;\n                flex-direction: column;\n                overflow-x: hidden;\n                overflow-y: auto;\n                padding: 10px;\n                -webkit-overflow-scrolling: touch;\n              }\n\n              #oibot_smallchat .Input {\n                position: relative;\n                width: 100%;\n                -webkit-box-flex: 0;\n                -webkit-flex-grow: 0;\n                -ms-flex-positive: 0;\n                flex-grow: 0;\n                -webkit-flex-shrink: 0;\n                -ms-flex-negative: 0;\n                flex-shrink: 0;\n                padding-top: 6px;\n                padding-bottom: 5px;\n                color: #96aab4;\n                background-color: #fff;\n                border-top: 1px solid #e6ebea;\n              }\n              #oibot_userinputdiv.Input {\n                height: 40px;\n              }\n              #oibot_smallchat .Input_field {\n                width: 92%;\n                resize: none;\n                border: none;\n                outline: none;\n                background-color: #F2F2F2;\n                color: #000000;\n                font-size: 16px;\n                border-radius: 10px;\n                padding: 10px;\n              }\n              #oibot_smallchat .Input_button-emoji {\n                right: 45px;\n              }\n              #oibot_smallchat .Input_button {\n                width: 30px;\n                height: 30px;\n                margin-top:-3px;\n                border-radius: 50%;\n                outline: none;\n                background-color: black;\n                cursor: pointer;\n              }\n              #oibot_smallchat .Input_button-send {\n                right: 15px;\n              }\n              #oibot_smallchat .Input-emoji .Input_button-emoji .Icon, #oibot_smallchat .Input_button:hover .Icon {\n                -webkit-transform: scale(1.1);\n                -ms-transform: scale(1.1);\n                transform: scale(1.1);\n                -webkit-transition: all .1s ease-in-out;\n                transition: all .1s ease-in-out;\n              }\n              #oibot_smallchat .Input-emoji .Input_button-emoji .Icon path, #oibot_smallchat .Input_button:hover .Icon path {\n                fill: #2c2c46;\n              }\n              .suggestionbutton {\n                background-color: #3080E2;\n                color: #FFFFFF;\n                text-align: center;\n                text-decoration: none;\n\n                margin: 4px 2px;\n                cursor: pointer;\n                border-radius: 16px;\n                text-transform: uppercase;\n                padding: 5px 20px;\n              }\n\n              .suggestionbutton, .optionbutton {\n                border: 2px solid #3080E2;\n              }\n              .suggestionbutton:hover, .optionbutton:hover:not([disabled]), .optionbutton.selected {\n                background-color: #FFFFFF;\n                color: #3080E2;\n              }\n\n              .oibot_icon {\n                width: 18px;\n                height: 18px;\n              }\n\n\n              .typing-indicator {\n                background-color: #3080E2;\n                will-change: transform;\n                width: auto;\n                border-radius: 50px;\n                padding: 10px;\n                margin-left: 20px;\n                width: 40px;\n                position: relative;\n                -webkit-animation: 2s bulge infinite ease-out;\n                animation: 2s bulge infinite ease-out;\n              }\n              .typing-indicator::before, .typing-indicator::after {\n                content: '';\n                position: absolute;\n                bottom: -2px;\n                left: -2px;\n                height: 15px;\n                width: 15px;\n                border-radius: 50%;\n                background-color: #3080E2;\n              }\n              .typing-indicator::after {\n                height: 8px;\n                width: 8px;\n                left: -9px;\n                bottom: -9px;\n              }\n              .typing-indicator span {\n                height: 10px;\n                width: 10px;\n                float: left;\n                margin: 0 1px;\n                background-color: #FFFFFF;\n                display: block;\n                border-radius: 50%;\n                opacity: 0.4;\n              }\n              .typing-indicator span:nth-of-type(1) {\n                -webkit-animation: 1s blink infinite .3333s;\n                animation: 1s blink infinite .3333s;\n              }\n              .typing-indicator span:nth-of-type(2) {\n                -webkit-animation: 1s blink infinite .6666s;\n                animation: 1s blink infinite .6666s;\n              }\n              .typing-indicator span:nth-of-type(3) {\n                -webkit-animation: 1s blink infinite .9999s;\n                animation: 1s blink infinite .9999s;\n              }\n              .dark-mode .typing-indicator span {\n                background-color: #000000;\n              }\n\n              @keyframes blink {\n                50% {\n                  opacity: 1;\n                }\n              }\n              @keyframes bulge {\n                50% {\n                  transform: scale(1.05);\n                }\n              }\n\n\n              .circle {\n                border-radius:50%;\n              }\n              .outer {\n                display:table;\n                background-color:#3080E2;\n                width:25px;\n                height:25px;\n                position:relative;\n              }\n              .inner {\n\n                color:#FFFFFF;\n                top:4px;\n                font-size:16px;\n                left:6px;\n                width:50%;\n                height:50%;\n                position:absolute;\n              }\n\n              #oibot_closechat .closechat {\n                padding: 0 0 10px 10px;\n                font-size: 17px;\n                color: red;\n              }\n              #oibot_closechat .buttons {\n                padding-left:calc(100% - 245px);\n              }\n              #oibot_closechat .suggestionbutton {\n                display: inline-block;\n                font-size: 15px;\n                opacity: 1;\n              }\n\n              .mySlides {\n                position: relative;\n                min-height: 190px;\n                height: 190px;\n                margin-top:10px;\n                font-size: 13px;\n                overflow-x: hidden;\n                overflow-y: hidden;\n                display: grid;\n                grid-gap: 10px;\n                grid-auto-flow: column;\n                max-width:90%;\n                margin-left:20px;\n              }\n              .botSlidesNav {\n                position: relative;\n                margin-top: -5px;\n                margin-bottom: 0px;\n              }\n              .suggestionbutton.viewmore{\n                position:absolute;\n                font-size:13px;\n                right:0px;\n                top:75%;\n                width:35%;\n                height:15%;\n                border-radius:10px;\n              }\n              .prev, .next , .prev1, .next1{\n                cursor: pointer;\n                position: relative;\n                float: right;\n              }\n              .prev {\n                right: 70px;\n              }\n              .next {\n                right: -5px;\n              }\n              .prev1{\n               top:-10px;\n                left:10px;\n              }\n              .next1{\n                top:-7px;\n                right:-22px;\n              }\n              .roundedNav {\n                width:8px;\n\n                border-radius: 50%;\n                background-color: #000000;\n                padding: 8px 13px;\n              }\n\n              .roundedNav1 {\n                position:absolute;\n                color:black;\n                z-index:99;\n                padding: 8px 6px;\n                transform:translateX(-50%);\n              }\n              .suggestionrow{\n                  overflow-x:hidden;\n                  max-width:100%;\n                  white-space:nowrap;\n              }\n              .arrow {\n                position: relative;\n                width: 2.5rem;\n                height: 2.5rem;\n                display: inline-block;\n              }\n              .arrow::before, .arrow::after {\n                content:\"\";\n                position: absolute;\n                background: #FFFFFF;\n                border-radius: 0.2rem;\n                display: block;\n              }\n              .arrow.left, .arrow.right {\n                width: 9px;\n                height: 12px;\n              }\n              .arrow.left::before, .arrow.right::before {\n                top: 55%;\n              }\n              .arrow.left::after, .arrow.right::after {\n                bottom: 55%;\n              }\n              .arrow.left::before, .arrow.left::after, .arrow.right::before, .arrow.right::after {\n                left: -5%;\n                height: 25%;\n                width: 110%;\n              }\n              .arrow.left::before, .arrow.left::after {\n                transform: rotate(45deg);\n              }\n              .arrow.left::after {\n                transform: rotate(-45deg);\n              }\n              .arrow.right::before, .arrow.right::after {\n                transform: rotate(-45deg);\n              }\n              .arrow.right::after {\n                transform: rotate(45deg);\n              }\n              .carousel {\n                position:relative;\n                width: 160px;\n                height: 100%;\n                vertical-align: top;\n                border-radius: 10px;\n                background-color: #3080E2;\n                color: #FFFFFF;\n                cursor: pointer;\n                opacity: 0.5;\n              }\n              .carousel1 {\n                position:absolute;\n                width:100%;\n                height:70%;\n                border-radius: 14px;\n                background-color: #3080E2;\n                color: #FFFFFF;\n                cursor: pointer;\n                opacity: 0.5;\n              }\n              .carousel1 img {\n                height: 88%;\n                border-radius: 10px;\n                background-color: #FFFFFF;\n                width: 44%;\n                margin: 5px 0 0 5px;\n              }\n              .carousel1 span {\n                position:absolute;\n                width:50%;\n                margin-left: 5px;\n                display: inline-block;\n                font-weight: bold;\n                top:9px;\n                right:5px;\n              }\n              .carousel1 .circularchart{\n                position:absolute;\n                left:32%;\n              }\n              .carousel1.active {\n                opacity: 1.0;\n              }\n              .carousel1 .circularchart{\n                left:30%;\n                text-align:center;\n              }\n              .carousel1 img {\n                height: 88%;\n                border-radius: 10px;\n                background-color: #FFFFFF;\n                width: 44%;\n                margin: 5px 0 -35px 5px;\n              }\n\n              .carousel.active {\n                opacity: 1.0;\n              }\n              .carousel img {\n                height: 100px;\n                border-radius: 10px;\n                background-color: #FFFFFF;\n                width: 94%;\n                margin: 5px 0 0 5px;\n              }\n              .carousel span {\n                margin-left: 5px;\n                display: inline-block;\n                font-weight: bold;\n                margin-top: 5px;\n                vertical-align: top;\n              }\n              .circularchart {\n                display: block;\n                position:absolute;\n                border-radius:10px;\n                top:2px;\n                right:10px;\n                font-size:11px;\n                max-width: 30px;\n    //            background-color:#FF7F50;\n                background-image: linear-gradient(174deg, #AFE78F 0%, #77CB56 100%);\n                max-height: 30px;\n                padding: 5px;\n              }\n              .circle1 {\n                stroke: #ef8b00;\n                fill: none;\n                stroke-width: 2.8;\n                stroke-linecap: round;\n                animation: progress 1s ease-out forwards;\n              }\n              .mySlides.fadeSlide {\n                -webkit-animation-name: fade;\n                -webkit-animation-duration: 1.5s;\n                animation-name: fade;\n                animation-duration: 1.5s;\n                transition: none;\n              }\n\n              @-webkit-keyframes fade {\n                from {opacity: .4}\n                to {opacity: 1}\n              }\n              @keyframes fade {\n                from {opacity: .4}\n                to {opacity: 1}\n              }\n\n              .mySlides.product {\n                font-size: 14px;\n                min-height: 110px;\n                height: 110px;\n                overflow-x: auto;\n              }\n              .mySlides.product .carousel {\n                width: 100%;\n                height: 110px;\n                cursor: initial;\n                background-color:black;\n                color:white;\n              }\n              .mySlides.product .carousel1 {\n                width: 100%;\n                height: 110px;\n                cursor: initial;\n                background-color:black;\n                color:white;\n              }\n              .mySlides.product .carousel1 .viewmore{\n                display:none;\n              }\n\n             .dark-mode .mySlides.product .carousel {\n                width: 100%;\n                height: 110px;\n                cursor: initial;\n                background-color:#a0a0a0;\n                color:white;\n              }\n              .mySlides.product .carousel img {\n                height: 85%;\n                width: 32%;\n                margin: 7px 0 0 10px;\n              }\n\n              .mySlides.product .carousel1 img {\n                height: 85%;\n                width: 32%;\n                margin: 7px 0 0 10px;\n              }          .myslides.product .rating{\n               display:none;\n             }\n              .mySlides.product .carousel span {\n                width: calc(64% - 20px);\n                margin-left: 10px;\n                margin-top: 10px;\n              }\n              .mySlides.product .carousel1 span {\n                width: calc(64% - 20px);\n                margin-left: 10px;\n                margin-top: 10px;\n              }\n              .mySlides.product .circularchart {\n                top:-1px;\n                left:55px;\n                text-align:center;\n              }\n              .mySlides.product .botslidesnav{\n                  position: relative;\n                  margin-top: -5px;\n                  margin-bottom: 0px;\n              }\n\n              div.stars {\n                width: 303px;\n                display: inline-block;\n                transition: .1s all ease;\n\n              }\n              div.stars.clicked{\n                transition:0.6s;\n              }\n\n              .hail{\n                margin-top:30px;\n                font-size:14px;\n                font-weight:bold;\n                margin-left:39px;\n              }\n              input.star { display: none; }\n\n              label.star {\n                cursor:pointer;\n                float: right;\n                padding: 10px;\n                width : 35px;\n                color: #444;\n                transition: all .2s;\n              }\n\n              input.star:checked ~ label.star:before {\n                transition: all .25s;\n                background-image: url('"+this.assetsUrl+"Path+Copy+9-min.png');\n                background-size: 40px 40px;\n                display: inline-block;\n                width: 40px;\n                height: 40px;\n                content: \"\";\n              }\n\n\n              input.star-5:checked ~ label.star:before {\n                color: #ffe52c;\n                text-shadow: 0 0 20px #952;\n              }\n\n              input.star-1:checked ~ label.star:before { color: #F62; }\n\n\n              label.star:not([disabled]):hover { transform: rotate(-15deg) scale(1.3);}\n\n              label.star:before {\n                transition: all .25s;\n                background-image: url('"+this.assetsUrl+"Path+Copy+10-min.png');\n                background-size: 40px 40px;\n                display: inline-block;\n                width: 40px;\n                height: 40px;\n                content:\"\";\n              }\n\n              .dark-mode {\n                background-color: black;\n                color: white;\n              }\n              @media only screen and (min-width:320px)and (max-width:375px){\n                #oibot_minimize{\n                  display:none;\n                }\n                #oibot_smallchat .layout-right {\n                  right:1px;\n                }\n                .headertitle{\n                  font-size:13px;\n                }\n                .headertitle .welcome {\n                  margin-left: 40%;\n                }\n                .headertitle > span:last-child {\n                  margin-left: 23%;\n                  display: inline;\n                }\n                #oibot_smallchat .messenger_header {\n                  align-items:center;\n                  padding-left:17px;\n                  padding-right:20px;\n                  height:40px;\n                }\n                #oibot_smallchat .layout-expand {\n                  min-height:97%;\n                  min-width: 100%;\n                  overflow: hidden;\n                }\n                .mySlides.product .circularchart {\n                  top:0px;\n                  left:17%;\n                }\n                .tooltip:hover .tooltiptext {\n                  visibility: hidden;\n                }\n                .div.stars {\n                    width: 303px;\n                    display: inline-block;\n                    transition: .1s all ease;\n                    margin-left: 0px;\n                }\n\n              }\n\n              @media only screen and (min-width:410px) and (max-width:414px){\n                #oibot_minimize{\n                  display:none;\n                }\n                #oibot_smallchat .layout-right {\n                  right:1px;\n                }\n                .headertitle{\n                  font-size:13px;\n                }\n                .headertitle .welcome {\n                  margin-left: 39%;\n                }\n                #oibot_smallchat .messenger_header {\n                  align-items:center;\n                  padding-left:33px;\n                  padding-right:20px;\n                  height:40px;\n                }\n                #oibot_smallchat .layout-expand {\n\n                  min-height:97%;\n                  min-width: 100%;\n\n                  overflow: hidden;\n                }\n                .mySlides.product .circularchart {\n                  top:0px;\n                  left:20%;\n                }\n                .tooltip:hover .tooltiptext {\n                  visibility: hidden;\n                }\n                .div.stars {\n                    width: 303px;\n                    display: inline-block;\n                    transition: .1s all ease;\n                    margin-left: 15px;\n                }\n              }\n              @media only screen and (min-width:750px) and (max-width:770px){\n                #oibot_minimize{\n                  display:none;\n                }\n                #oibot_smallchat .layout-right {\n                  right:1px;\n                }\n                .headertitle{\n                  font-size:13px;\n                }\n                .headertitle .welcome {\n                  margin-left: 39%;\n                }\n                .headertitle > span:last-child {\n                  margin-left: 30%;\n                  display: inline;\n                }\n                #oibot_smallchat .messenger_header {\n                  align-items:center;\n                  padding-left:10%;\n                  padding-right:20px;\n                  height:40px;\n                }\n                #oibot_smallchat .layout-expand {\n\n                  min-height:70%;\n                  min-width: 70%;\n\n                  overflow: hidden;\n                }\n                .botSuggestionResponse {\n\n                  font-size: 20px;\n\n                }\n                .mySlides.product .circularchart {\n                  top:0px;\n                  left:20%;\n                }\n                .tooltip:hover .tooltiptext {\n                  visibility: hidden;\n                }\n                .div.stars {\n                    width: 303px;\n                    display: inline-block;\n                    transition: .1s all ease;\n                  padding-left:10%\n                }\n              }\n\n             .rating{\n               width:200px;\n               display:inline;\n               font-weight:bold;\n               font-size:12px;\n               margin-left:22px;\n               margin-top:15px;\n                margin-bottom:10px;\n               color:white;\n    //           background-color:#FF7F50;\n               background-image: linear-gradient(174deg, #AFE78F 0%, #77CB56 100%);\n               padding: 5px;\n               border-radius: 10px;\n             }\n             .ratdiv{\n               content:'';\n               display:inline;\n               border-radius:40%;\n               width:0px;\n               margin-top:-25px;\n               margin-left:3px;\n               padding:6px;\n               height:14px;\n               color:#FF7F50;\n               background-color:#FF7F50;\n             }\n\n            ",this.loadUIdesign=function(){let that=this;if(document.getElementById("oibot_maindiv"))return!1;this.maindiv.setAttribute("id","oibot_maindiv"),setTimeout(()=>{that.onChatClick()},4e4);let userId=window.localStorage.getItem("isFromStorage"),encodedStr=window.localStorage.getItem("history"),encodedSession=window.localStorage.getItem("session");if(userId&&encodedStr&&encodedSession?(this.botUserId=userId,this.maindiv.innerHTML=decodeURIComponent(escape(window.atob(encodedStr))),this.sessionAttributes=JSON.parse(decodeURIComponent(escape(window.atob(encodedSession))))):(this.botUserId="chatbot-JS"+(new Date).getTime(),this.maindiv.innerHTML=this.chatHTML),document.addEventListener("readystatechange",event=>{if(event.target.readyState,"complete"===event.target.readyState){document.body.appendChild(that.maindiv),that.init(),that.bindEvents(),document.getElementById("oibot_script_aws")&&document.getElementById("oibot_script_aws").remove();let script=document.createElement("script");if(script.src="https://sdk.amazonaws.com/js/aws-sdk-2.41.0.min.js",script.id="oibot_script_aws",script.onload=function(){AWS.config.region="us-east-1",AWS.config.credentials=new AWS.CognitoIdentityCredentials({IdentityPoolId:"us-east-1:10159bc8-c7b5-443c-a6e1-3a795c0ab408"})},that.maindiv.appendChild(script),window.localStorage.getItem("isFromStorage")){document.getElementById("oibot_chaton").click();let conversationDiv=document.getElementById("oibot_conversation"),sbtn=document.getElementsByClassName("suggestionbutton");for(let sIdx=0;sIdx<sbtn.length;sIdx++)sbtn[sIdx].addEventListener("click",(function(){this.classList.contains("close")||that.newfunction(this)}));let arrow1=document.getElementsByClassName("prev1");for(let pIdx=0;pIdx<arrow1.length;pIdx++)arrow1[pIdx].addEventListener("click",(function(){document.getElementById("oibot_suggrow").scrollBy(-300,0)}));let arrow2=document.getElementsByClassName("next1");for(let nIdx=0;nIdx<arrow1.length;nIdx++)arrow2[nIdx].addEventListener("click",(function(){document.getElementById("oibot_suggrow").scrollBy(300,0)}));conversationDiv.scrollTop=conversationDiv.scrollHeight}that.removeStorage()}}),!document.getElementById("oibot_style_common")){let style=document.createElement("style");style.type="text/css",style.id="oibot_style_common",style.innerHTML=this.stylesrc,this.maindiv.appendChild(style)}},this.init=function(){let closediv;document.getElementById("oibot_closechat").style.display="none";let slides=document.getElementsByClassName("botSlides");if(slides&&slides.length)for(let eIdx=0;eIdx<slides.length;eIdx++){let element=slides[eIdx],activeSlide=element.getElementsByClassName("carousel active"),activeCarousel=null;activeSlide.length?activeCarousel=activeSlide[0]:!activeSlide.length&&element.childNodes.length&&(activeCarousel=element.querySelector(".carousel"),activeCarousel.classList.add("active")),activeCarousel&&this.showSlides(parseInt(activeCarousel.getAttribute("slide"))+1,eIdx)}let starLabels=document.querySelectorAll("label.star");if(starLabels&&starLabels.length)for(let sIdx=0;sIdx<starLabels.length;sIdx++)starLabels[sIdx].addEventListener("click",(function(){if(!this.classList.contains("disabled")){document.getElementById("ng").style.display="none",document.getElementById("greet").style.display="block";let stars=document.querySelectorAll(".stars label.star");for(let sIdx=0;sIdx<stars.length;sIdx++)stars[sIdx].setAttribute("disabled",""),stars[sIdx].classList.add("disabled");stars=document.querySelectorAll(".stars input.star");for(let sIdx=0;sIdx<stars.length;sIdx++)stars[sIdx].classList.add("disabled")}}))},this.bindEvents=function(){let that=this,minimizebtn=document.getElementById("oibot_minimize"),light,headertitlebtn,closebtn,inputbtn,pushbtn,chatbtn,okbtn,cancelbtn;document.getElementById("oibot_light").addEventListener("click",(function(l){that.darkmode()})),[minimizebtn,document.getElementById("oibot_headertitle")].forEach(element=>{element.addEventListener("click",(function(e){"none"==document.getElementById("oibot_messenger_content").style.display?that.onMaximizeClick():that.onMinimizeClick()}))}),document.getElementById("oibot_closeicon").addEventListener("click",(function(e){that.onCloseClick()})),document.getElementById("oibot_userinput").addEventListener("keyup",(function(event){13===event.keyCode&&(event.preventDefault(),document.getElementById("oibot_pushchat").click())})),document.getElementById("oibot_pushchat").addEventListener("click",(function(e){that.pushChat()})),document.getElementById("oibot_chaton").addEventListener("click",(function(e){that.onChatClick()})),document.getElementById("oibot_okdiv").addEventListener("click",(function(e){that.onOkClick()})),document.getElementById("oibot_canceldiv").addEventListener("click",(function(e){that.onCancelClick()}))},this.pushChat=function(){let userText=document.getElementById("oibot_userinput");if(null==userText||null==userText.value||0==userText.value.trim().length||userText.disabled)return!1;let msg=userText.value.trim();userText.value="...",userText.disabled=!0,this.showRequest(msg),this.sendRequest(msg)},this.sendRequest=function(userRequest,snAttr,callbackFn){let that=this,botruntime=new AWS.LexRuntime,sessionAttributes=this.sessionAttributes;snAttr&&(sessionAttributes=snAttr);let msg=userRequest.trim();sessionAttributes.isProduct&&!sessionAttributes.curProductId&&(msg="Product A"),delete sessionAttributes.curProductId,delete sessionAttributes.isProduct;const params={botAlias:"Mattressalias",botName:"Mattress_bot",inputText:msg,userId:this.botUserId,sessionAttributes:sessionAttributes};botruntime.postText(params,(function(err,data){let userText=document.getElementById("oibot_userinput");userText.value="",userText.disabled=!1;let btns=document.getElementsByClassName("optionbutton");for(let idx=0;idx<btns.length;idx++)btns[idx].setAttribute("done","true"),btns[idx].setAttribute("disabled","");if(err)return that.showError("Error:  Please try again"),document.getElementById("oibot_typingindicator")&&document.getElementById("oibot_typingindicator").remove(),callbackFn&&callbackFn(!1),!1;data&&("ElicitIntent"==data.dialogState&&(delete data.sessionAttributes.buttons,delete data.sessionAttributes.messages,delete data.sessionAttributes.slides,delete data.sessionAttributes.suggestionsObj,delete data.sessionAttributes.suggestions),that.sessionAttributes=data.sessionAttributes,that.showResponse(data),"Fulfilled"==data.dialogState&&that.showRating()),callbackFn&&callbackFn(!0)}))},this.showRequest=function(userText){userText&&this.sessionAttributes.isSecure&&(userText=userText.substring(0,userText.length/2)+"X".repeat(userText.length/2));let conversationDiv=document.getElementById("oibot_conversation"),requestPara=document.createElement("P");requestPara.className="oibot_userrequest",requestPara.appendChild(document.createTextNode(userText)),conversationDiv.appendChild(requestPara),conversationDiv.scrollTop=conversationDiv.scrollHeight;let typingdiv=document.createElement("DIV");typingdiv.setAttribute("id","oibot_typingindicator"),typingdiv.className="typing-indicator";let span1=document.createElement("span");typingdiv.appendChild(span1);let span2=document.createElement("span");typingdiv.appendChild(span2);let span3=document.createElement("span");typingdiv.appendChild(span3),conversationDiv.appendChild(typingdiv),conversationDiv.scrollTop=conversationDiv.scrollHeight},this.showError=function(userText){let conversationDiv=document.getElementById("oibot_conversation"),errorPara=document.createElement("P");errorPara.className="botError",errorPara.appendChild(document.createTextNode(userText)),conversationDiv.appendChild(errorPara),conversationDiv.scrollTop=conversationDiv.scrollHeight},this.showPlainText=function(message,skipIcon){let conversationDiv=document.getElementById("oibot_conversation"),botIcon=document.createElement("DIV");botIcon.className="circle outer";let botInnerIcon=document.createElement("DIV");botInnerIcon.className="circle inner";let html=document.createTextNode("G");botInnerIcon.appendChild(html),botIcon.appendChild(botInnerIcon);let responsePara=document.createElement("P");if(responsePara.className="oibot_botresponse",null!=message&&null!=message){let res=message.split("htt");if(responsePara.appendChild(document.createTextNode(res[0])),responsePara.appendChild(document.createElement("br")),res[1]){let x=document.createElement("A"),t=document.createTextNode("htt"+res[1]);x.setAttribute("href","htt"+res[1]),x.setAttribute("target","_blank"),x.appendChild(t),responsePara.appendChild(x)}}skipIcon?responsePara.style.marginTop="6px":conversationDiv.appendChild(botIcon),conversationDiv.appendChild(responsePara),conversationDiv.scrollTop=conversationDiv.scrollHeight},this.showButtons=function(buttons){let that=this,conversationDiv=document.getElementById("oibot_conversation"),responsePara=document.createElement("P");for(bIdx in responsePara.className="botOptionResponse",buttons){let button=document.createElement("span"),data=buttons[bIdx];button.innerHTML=data.name,data.id?button.setAttribute("value",data.id):data.value&&button.setAttribute("value",data.value),button.className="optionbutton",button.addEventListener("click",(function(){if(!this.getAttribute("done")){let msg=this.innerText,snAttr=that.sessionAttributes;this.getAttribute("value")&&(snAttr.id=this.getAttribute("value")),that.showRequest(msg),that.sendRequest(msg,snAttr),this.classList.add("selected")}})),responsePara.appendChild(button)}conversationDiv.appendChild(responsePara),conversationDiv.scrollTop=conversationDiv.scrollHeight},this.showSuggestions=function(suggestionList){let that=this,conversationDiv=document.getElementById("oibot_conversation"),responsePara=document.createElement("P");for(data in responsePara.setAttribute("id","oibot_suggestions"),responsePara.className="botSuggestionResponse",suggestionList){let suggestionbtn=document.createElement("span");suggestionbtn.innerHTML=suggestionList[data],suggestionbtn.className="suggestionbutton",suggestionbtn.addEventListener("click",(function(){let msg=this.innerHTML;document.getElementById("oibot_suggestions")&&document.getElementById("oibot_suggestions").remove(),that.showRequest(msg),that.sendRequest(msg)})),responsePara.appendChild(suggestionbtn)}conversationDiv.appendChild(responsePara),conversationDiv.scrollTop=conversationDiv.scrollHeight},this.showSuggestionsObj=function(suggestionList){let that=this,conversationDiv=document.getElementById("oibot_conversation"),responsePara=document.createElement("P");responsePara.setAttribute("id","oibot_suggestions"),responsePara.className="botSuggestionResponse";let pi=document.createElement("span");pi.className="roundedNav1 prev1",pi.id="p1";let piArrow=document.createElement("img");piArrow.style.width="20px",piArrow.src=this.assetsUrl+"Group+5+Copy+2-min.png",pi.appendChild(piArrow);let ni=document.createElement("span");ni.className="roundedNav1 next1",ni.id="n1";let niArrow=document.createElement("img");niArrow.style.width="20px",niArrow.src=this.assetsUrl+"Group+5+Copy+3-min.png",ni.appendChild(niArrow);let ns=document.createElement("span");for(idx in ns.className="suggestionrow",ns.id="oibot_suggrow",responsePara.appendChild(pi),responsePara.appendChild(ni),window.onscroll=function(){window.scrollTo(0,0)},pi.addEventListener("click",(function(){document.getElementById("oibot_suggrow").scrollBy(-300,0)})),ni.addEventListener("click",(function(){document.getElementById("oibot_suggrow").scrollBy(300,0)})),suggestionList){let suggestion=suggestionList[idx],suggestionbtn=document.createElement("span");suggestionbtn.innerHTML=suggestion.name,suggestionbtn.className="suggestionbutton",suggestion.id&&suggestionbtn.setAttribute("value",suggestion.id),suggestion.link&&suggestionbtn.setAttribute("link",suggestion.link),suggestion.isAjax&&suggestionbtn.setAttribute("isAjax",suggestion.isAjax),suggestionbtn.addEventListener("click",(function(){that.newfunction(suggestionbtn)})),ns.appendChild(suggestionbtn)}responsePara.appendChild(ns),conversationDiv.appendChild(responsePara),ns.scrollWidth<300&&(responsePara.removeChild(pi),responsePara.removeChild(ni)),conversationDiv.scrollTop=conversationDiv.scrollHeight},this.newfunction=function(ele){let that=this;delete that.sessionAttributes.isProduct;let msg=ele.innerHTML,isSendRequest=!1,curValue=ele.getAttribute("value"),curLink=ele.getAttribute("link"),ajaxUrl=ele.getAttribute("isAjax"),snAttr=that.sessionAttributes,curProductId=null,curVariationId=null,curProductUrl=null,curProductName=null,carouselEle=document.getElementById("oibot_suggestions");if(carouselEle&&(carouselEle=carouselEle.previousSibling),carouselEle&&!carouselEle.classList.contains("mySlides")&&(carouselEle=carouselEle.previousSibling),carouselEle&&(carouselEle=carouselEle.getElementsByClassName("carousel active")),carouselEle&&carouselEle.length){let titleEle=carouselEle[0].querySelector(".title");titleEle&&(curProductId=titleEle.getAttribute("value"),curVariationId=titleEle.getAttribute("variationid"),curProductUrl=titleEle.getAttribute("url"),curProductName=titleEle.innerHTML.split("<")[0])}if(curValue&&(snAttr.id=curValue),"{product}"==curLink&&that.sessionAttributes.productUrl?curLink=that.sessionAttributes.productUrl:"{product}"==curLink&&curProductUrl&&(curLink=curProductUrl,that.sessionAttributes.curProductId=curProductUrl,snAttr.id=curProductId,snAttr.productName=curProductName,snAttr.variationId=curVariationId),ajaxUrl&&that.sessionAttributes.productId){let productJson={product_id:that.sessionAttributes.productId,quantity:1};curVariationId?productJson.variation_id=curVariationId:that.sessionAttributes.variationId&&(productJson.variation_id=that.sessionAttributes.variationId);let xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){4===xmlhttp.readyState&&that.sendRequest(msg,snAttr,callbackFn)},xmlhttp.open("POST",ajaxUrl),xmlhttp.setRequestHeader("Content-Type","application/json"),xmlhttp.send(JSON.stringify(productJson))}else if(ajaxUrl&&!that.sessionAttributes.productId&&curProductId){let productJson={product_id:curProductId,quantity:1};curVariationId&&(productJson.variation_id=curVariationId);let xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){4===xmlhttp.readyState&&that.sendRequest(msg,snAttr,callbackFn)},xmlhttp.open("POST",ajaxUrl),xmlhttp.setRequestHeader("Content-Type","application/json"),xmlhttp.send(JSON.stringify(productJson)),that.sessionAttributes.curProductId=curProductId,snAttr.id=curProductId,snAttr.productName=curProductName,snAttr.variationId=curVariationId}else isSendRequest=!0;document.getElementById("oibot_suggestions")&&document.getElementById("oibot_suggestions").remove();let callbackFn=null;curLink&&(callbackFn=function(isSuccess){let chatElement=document.getElementById("oibot_maindiv").cloneNode(!0),chatStr=String(chatElement.innerHTML).replace(/\n|\r|\s{2,}/g,""),encodedStr=window.btoa(unescape(encodeURIComponent(chatStr))),sessionStr=String(JSON.stringify(that.sessionAttributes)).replace(/\n|\r|\s{2,}/g,""),encodedSession=window.btoa(unescape(encodeURIComponent(sessionStr)));window.localStorage.setItem("history",encodedStr),window.localStorage.setItem("isFromStorage",that.botUserId),window.localStorage.setItem("session",encodedSession),"See more details"==msg?window.open(curLink,"_self"):window.open(curLink,"_blank")}.bind(this)),that.showRequest(msg),isSendRequest&&that.sendRequest(msg,snAttr,callbackFn)},this.showResponse=function(botResponse){let that=this;document.getElementById("oibot_typingindicator")&&document.getElementById("oibot_typingindicator").remove(),document.getElementById("oibot_suggestions")&&document.getElementById("oibot_suggestions").remove();let messages=null,skipIcon=!1;if(botResponse&&botResponse.sessionAttributes){let sessionAttributes=botResponse.sessionAttributes;sessionAttributes.messages&&(messages=JSON.parse(sessionAttributes.messages),messages&&messages.forEach((function(message){message.isbefore&&(that.showPlainText(message.text,skipIcon),skipIcon=!0)})))}if(botResponse&&botResponse.message&&(this.showPlainText(botResponse.message,skipIcon),skipIcon=!0),botResponse&&botResponse.sessionAttributes){let sessionAttributes=botResponse.sessionAttributes;if(messages&&messages&&messages.forEach((function(message){message.isbefore||that.showPlainText(message.text,skipIcon)})),sessionAttributes.slides){let slides=JSON.parse(sessionAttributes.slides);this.showcarousel(slides)}else if(sessionAttributes.buttons){let buttons=JSON.parse(sessionAttributes.buttons);this.showButtons(buttons)}if(sessionAttributes.suggestionsObj){let suggestionsObj=JSON.parse(sessionAttributes.suggestionsObj);this.showSuggestionsObj(suggestionsObj)}else if(sessionAttributes.suggestions){let suggestions=JSON.parse(sessionAttributes.suggestions);this.showSuggestions(suggestions)}}},this.removeStorage=function(){window.localStorage.removeItem("history"),window.localStorage.removeItem("isFromStorage"),window.localStorage.removeItem("session")},this.onChatClick=function(){let layout=document.getElementsByClassName("layout")[0],chaticon=document.getElementById("oibot_chaton"),popMessage=document.getElementById("oibot_popup");if("none"==layout.style.display||""==layout.style.display){chaticon.style.display="none",popMessage.style.display="none",layout.style.display="block";let messages={suggestions:["Yes","No"]},sn={};messages.messages=JSON.stringify(this.initialChatScript),messages.suggestions=JSON.stringify(messages.suggestions),sn.sessionAttributes=messages,this.showResponse(sn)}},this.onCloseClick=function(){if(this.removeStorage(),!document.getElementsByClassName("oibot_userrequest").length)return this.onOkClick(),!0;let layout=document.getElementsByClassName("layout")[0],messengerbody=document.getElementById("oibot_messenger_content"),chaticon=document.getElementById("oibot_chaton"),popMessage=document.getElementById("oibot_popup"),closechatmsg,userinputdiv;document.getElementById("oibot_closechat").style.display="block",document.getElementById("oibot_userinputdiv").style.display="none",chaticon.style.display="none",popMessage.style.display="none",layout.style.display="block",layout.style.minHeight="",messengerbody.style.display=null},this.onMinimizeClick=function(){let layout=document.getElementsByClassName("layout")[0],messengerbody=document.getElementById("oibot_messenger_content"),chaticon=document.getElementById("oibot_chaton"),popMessage=document.getElementById("oibot_popup");chaticon.style.display="none",popMessage.style.display="none",layout.style.minHeight="60px",messengerbody.style.display="none"},this.onMaximizeClick=function(){let layout=document.getElementsByClassName("layout")[0],messengerbody=document.getElementById("oibot_messenger_content"),chaticon=document.getElementById("oibot_chaton"),popMessage=document.getElementById("oibot_popup");chaticon.style.display="none",popMessage.style.display="none",layout.style.minHeight=null,messengerbody.style.display=null},this.removeallchildnode=function(parentnode){let childNodes=document.getElementById(parentnode).childNodes;for(let i=childNodes.length-1;i>=0;i--){let childNode;childNodes[i].remove()}},this.onOkClick=function(){let closechatmsg,userinputdiv;document.getElementById("oibot_closechat").style.display="none",document.getElementById("oibot_userinputdiv").style.display="block",this.removeallchildnode("oibot_conversation");let layout=document.getElementsByClassName("layout")[0],messengerbody=document.getElementById("oibot_messenger_content"),chaticon=document.getElementById("oibot_chaton"),popMessage=document.getElementById("oibot_popup");layout.style.display="none",layout.style.minHeight="",chaticon.style.display="block",popMessage.style.display="block",messengerbody.style.display=null,this.botUserId="chatbot-JS"+(new Date).getTime(),this.sessionAttributes={}},this.onCancelClick=function(){let closechatmsg,userinputdiv;document.getElementById("oibot_closechat").style.display="none",document.getElementById("oibot_userinputdiv").style.display="block"},this.showcarousel=function(slidelist){let that=this;this.slideIndex.push(1);let curIdx=document.getElementsByClassName("botSlides").length,conversationDiv=document.getElementById("oibot_conversation"),trating=document.createElement("p");trating.id="tr",trating.className="rating";let ax=document.createTextNode("Expert Rating From Goodbed.com");trating.appendChild(ax),slidelist.length&&conversationDiv.appendChild(trating);let responsePara=document.createElement("P");if(responsePara.setAttribute("id",this.slideDivId+curIdx),responsePara.className="botSlides mySlides fadeSlide",slidelist.length>1){let firstSlideDiv=document.createElement("SPAN"),firstSlide=slidelist[0];firstSlideDiv.id="single_"+curIdx;let slide=document.createElement("span");slide.className="carousel1 active";let img=document.createElement("img");img.src=firstSlide.images[0]||firstSlide.image;let innerHTML=firstSlide.name,span=document.createElement("span");span.innerHTML=innerHTML,span.className="title",firstSlide.id&&span.setAttribute("value",firstSlide.id),firstSlide.permalink&&span.setAttribute("url",firstSlide.permalink),firstSlide.variation_id&&span.setAttribute("variationid",firstSlide.variation_id);let view=document.createElement("span");view.id="newview",view.className="suggestionbutton viewmore",view.addEventListener("click",(function(){document.getElementById("single_"+curIdx).style.display="none",document.getElementById(that.slideDivId+curIdx).style.display="inline-grid";let curSlideParent=this.closest(".botSlides");curSlideParent.nextSibling.style.display="block";let slidess=curSlideParent.getElementsByClassName("carousel");for(let sIdx=0;sIdx<slidess.length;sIdx++)slidess[sIdx].style.display="block";conversationDiv.scrollTop=conversationDiv.scrollHeight}));let viewtext=document.createTextNode("View More Products");view.appendChild(viewtext);let prrat=document.createElement("span");prrat.className="circularchart";let html=document.createTextNode(firstSlide.rating+"%");prrat.appendChild(html),slide.appendChild(img),slide.appendChild(span),slide.appendChild(prrat),slide.addEventListener("click",(function(){if(this.parentNode.classList.contains("product"))return!1;this.classList.contains("active")||that.showSlides(parseInt(this.getAttribute("slide"))+1,curIdx);let product=this.childNodes[1],msg=product.innerHTML.split("<")[0],snAttr=that.sessionAttributes;product.getAttribute("value")&&(snAttr.id=product.getAttribute("value"),snAttr.productName=msg),product.getAttribute("variationid")&&(snAttr.variationId=product.getAttribute("variationid")),document.getElementById(that.slideDivId+curIdx).classList.add("disabled"),that.showRequest(msg),that.sendRequest(msg,snAttr)})),firstSlideDiv.appendChild(slide),firstSlideDiv.appendChild(view),responsePara.appendChild(firstSlideDiv)}for(idx in slidelist){let slide=document.createElement("span");slide.setAttribute("slide",idx),slide.className="carousel fadeSlide",that.sessionAttributes.productId||(slide.style.display="none");let img=document.createElement("img");img.src=slidelist[idx].images[0]||slidelist[idx].image;let span=document.createElement("span"),innerHTML=slidelist[idx].name;if(slidelist[idx].warranty&&(responsePara.style.display="none",innerHTML+="<br> Warranty: "+slidelist[idx].warranty),slidelist[idx].description){let desc=slidelist[idx].description;desc.length>80&&(desc=desc.slice(0,80)+"..."),innerHTML+=desc}span.innerHTML=innerHTML,span.className="title",slidelist[idx].id&&span.setAttribute("value",slidelist[idx].id),slidelist[idx].permalink&&span.setAttribute("url",slidelist[idx].permalink),slidelist[idx].variation_id&&span.setAttribute("variationid",slidelist[idx].variation_id);let prrat=document.createElement("span");prrat.className="circularchart";let html=document.createTextNode(slidelist[idx].rating+"%");prrat.appendChild(html),slide.appendChild(img),slide.appendChild(span),slide.appendChild(prrat),slide.addEventListener("click",(function(){if(this.parentNode.classList.contains("product"))return!1;this.classList.contains("active")||that.showSlides(parseInt(this.getAttribute("slide"))+1,curIdx);let product=this.childNodes[1],msg=product.innerHTML.split("<")[0],snAttr=that.sessionAttributes;product.getAttribute("value")&&(snAttr.id=product.getAttribute("value"),snAttr.productName=msg),product.getAttribute("variationid")&&(snAttr.variationId=product.getAttribute("variationid")),document.getElementById(that.slideDivId+curIdx).classList.add("disabled"),that.showRequest(msg),that.sendRequest(msg,snAttr)})),responsePara.appendChild(slide),conversationDiv.appendChild(responsePara)}if(document.onkeydown=function(e){39==e.keyCode?that.plusSlides(1,curIdx):37==e.keyCode&&that.plusSlides(-1,curIdx)},conversationDiv.appendChild(responsePara),slidelist.length>1){let pi=document.createElement("span");pi.className="roundedNav prev";let piArrow=document.createElement("img");piArrow.src=this.assetsUrl+"Path+Copy-min.png",piArrow.style.width="10px",pi.appendChild(piArrow);let ni=document.createElement("span");ni.className="roundedNav next";let niArrow=document.createElement("img");niArrow.src=this.assetsUrl+"Path+Copy-min-1.png",niArrow.style.width="10px",ni.appendChild(niArrow),pi.addEventListener("click",(function(){that.plusSlides(-1,curIdx)})),ni.addEventListener("click",(function(){that.plusSlides(1,curIdx)}));let responsePara1=document.createElement("P");responsePara1.className="botSlidesNav",responsePara1.appendChild(pi),responsePara1.appendChild(ni),responsePara1.style.display="none",conversationDiv.appendChild(responsePara1),this.sessionAttributes.isProduct=!0}else that.sessionAttributes.productId&&document.getElementById(this.slideDivId+curIdx).classList.add("product");document.getElementById(this.slideDivId+curIdx).getElementsByClassName("carousel")&&document.getElementById(this.slideDivId+curIdx).getElementsByClassName("carousel")[0].classList.add("active"),conversationDiv.scrollTop=conversationDiv.scrollHeight},this.plusSlides=function(n,sIdx){let curSlideParent;if(document.getElementById(this.slideDivId+sIdx).classList.contains("disabled"))return!1;this.showSlides(this.slideIndex[sIdx]+=n,sIdx)},this.showSlides=function(n,sIdx){let curSlideParent=document.getElementById(this.slideDivId+sIdx),slidess=curSlideParent.getElementsByClassName("carousel");this.slideIndex[sIdx]=n,n>slidess.length&&(this.slideIndex[sIdx]=1),n<1&&(this.slideIndex[sIdx]=slidess.length);for(let i=0;i<slidess.length;i++)slidess[i].classList.remove("active");slidess[this.slideIndex[sIdx]-1].classList.add("active"),this.slideIndex[sIdx]>1?(curSlideParent.scrollLeft=100,curSlideParent.scrollLeft+=170*(this.slideIndex[sIdx]-2)):curSlideParent.scrollLeft=0},this.showRating=function(){let conversationDiv=document.getElementById("oibot_conversation"),div=document.createElement("div");div.className="stars";let form=document.createElement("form"),n=5,a=[],b=[];for(let i=1;i<=5;i++,n--)a[i]=document.createElement("input"),a[i].name="rate",a[i].type="radio",a[i].id="star-"+n,a[i].className="star star-"+n,form.appendChild(a[i]),b[i]=document.createElement("label"),b[i].htmlFor="star-"+n,b[i].className="star star-"+n,b[i].addEventListener("click",(function(){this.classList.contains("disabled")||(document.getElementById("ng").style.display="none",document.getElementById("greet").style.display="block",form.style.pointerEvents="none")})),form.appendChild(b[i]);let html=document.createTextNode("How do you rate this chat experience?"),p=document.createElement("p");p.className="hail",p.id="ng",p.appendChild(html);let html2=document.createTextNode("Thank you, your feedback is noted. Have a good day."),p2=document.createElement("p");var x;p2.style.fontSize="14px",p2.id="greet",p2.className="hail",p2.appendChild(html2),p2.style.display="none",div.appendChild(p),div.appendChild(form),div.appendChild(p2),conversationDiv.appendChild(div),conversationDiv.scrollTop=conversationDiv.scrollHeight,document.getElementsByClassName("stars")[0].addEventListener("click",(function(){document.getElementById("ng").style.display="none",document.getElementById("greet").style.display="block",form.style.pointerEvents="none"}))},this.darkmode=function(){let dm;document.getElementById("oibot_conversation").classList.toggle("dark-mode")},this.getLocation=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(position){let latitude=position.coords.latitude,longitude=position.coords.longitude}))}}var instance;return{getInstance:function(){return instance||delete(instance=new BotUI).constructor,instance}}}();const botUI=new botFactory.getInstance;botUI.loadUIdesign();