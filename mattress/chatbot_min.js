"use strict";var botFactory=function(){function n(){this.maindiv=document.createElement("DIV"),this.botUserId=null,this.sessionAttributes={},this.slideIndex=[],this.slideDivId="oibot_slides_",this.initialChatScript=[{isbefore:!0,text:"Hi, I'm MattressBot! I'm here to help you find the perfect mattress so you can get a great night's"+String.fromCodePoint("0x1F634")},{isbefore:!1,text:"Are you ready to find your mattress?"}],this.assetsUrl="https://mattressassets.s3.amazonaws.com/assets/",this.chatHTML='\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n              <div class="container">\n                <div class="row">\n                  <div id="oibot_smallchat">\n                    <div class="layout layout-open layout-expand layout-right" style="border-radius: 10px;">\n                      <div class="messenger_messenger">\n                        <div class="messenger_header">\n                          <span id="oibot_headertitle" class="headertitle">\n                            <span class="welcome">Welcome to Gates</span>\n                            <br/>\n                            <span>\n                              <span class="powered_by">POWERED BY</span>\n                              <span class="anc" onclick="window.open(\'https://xselltechnologies.com\', \'_blank\');event.stopPropagation();"> XSELL Technologies</span>\n                            </span>\n                          </span>\n\n                          <div id="oibot_minimize" class="chat_minimize_icon oibot_icon">\n                            <svg viewBox="90 100 375 375">\n                              <g id="oibot_minimize_thin">\n                                <path fill="#ffffff" d="M1779.3,853.3H12.7v85.4h1766.7V853.3z"\n                                  transform="scale(.215, -.215) translate(400, -2300)"></path>\n                              </g>\n                            </svg>\n                          </div>\n\n                          <div id="oibot_light" class="chat_minimize_icon oibot_icon tooltip">\n                            <img src="'+this.assetsUrl+'darkmode.png" width="14px">\n                            \x3c!--<span class="tooltiptext">Toggle Dark Mode</span>--\x3e\n                          </div>\n                          <div id="oibot_closeicon" class="chat_close_icon oibot_icon">\n                           <img src="'+this.assetsUrl+'close.png" width="10px">\n                          </div>\n                        </div>\n                        <div id="oibot_messenger_content" class="messenger_content">\n                          <div id="oibot_conversation" class="messages">\n                          </div>\n                          <div id="oibot_closechat" class="Input Input-blank">\n                            <div class="closechat">\n                              Do you want to close the chat ?\n                            </div>\n                            <div class="buttons">\n                              <div id="oibot_canceldiv" class="suggestionbutton close">CANCEL</div>\n                              <div id="oibot_okdiv" class="suggestionbutton close">CONFIRM</div>\n                            </div>\n                          </div>\n\n                          <div id="oibot_userinputdiv" class="Input Input-blank">\n                            <div id="oibot_container">\n                              <div class="container_input">\n                                \x3c!--<form id="oibot_chatform" class="Input_field">--\x3e\n                                  <input type="text" class="Input_field"\n                                    id="oibot_userinput" size="80" value="" placeholder="Enter your message">\n                                \x3c!--</form>--\x3e\n                              </div>\n                              <div class="container_push">\n                                <button id="oibot_pushchat" class="Input_button Input_button-send">\n                                  <div class="oibot_icon">\n                                   <img src="'+this.assetsUrl+'send.png" class="sendbutton" width="18px">\n                                </button>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div id="oibot_popup">\n                        \x3c!-- <div class="chathead" style="background-image: url(\''+this.assetsUrl+'avatar.jpeg\');"></div>--\x3e\n                        <div class="chathead" style="background-image: url(\''+this.assetsUrl+'chatbot.png\');"></div>\n                        <span class="text">Hi I\'m MattressBot, have a question? I can help you, text me here!</span>\n                      </div>\n                  </div>\n                  <div id="oibot_chaton" class="chat_on">\n                    <span class="chat_on_icon">\n                      <svg viewBox="0 0 600 600">\n                        <defs>\n                          <filter id="oibot_dropshadow" height="140%">\n                            <feGaussianBlur in="SourceAlpha" stdDeviation="15"></feGaussianBlur>\n                            <feOffset result="offsetblur" dx="10" dy="10"></feOffset>\n                            <feComponentTransfer>\n                              <feFuncA type="linear" slope="0.8"></feFuncA>\n                            </feComponentTransfer>\n                            <feMerge>\n                              <feMergeNode></feMergeNode>\n                              <feMergeNode in="SourceGraphic"></feMergeNode>\n                            </feMerge>\n                          </filter>\n                        </defs>\n                        <g id="oibot_comments-o" class="designstudio-container">\n                          <circle class="designstudio-circle" cx="50%" cy="50%" r="260" fill="#3498db" linejoin="round"\n                            stroke="#ffffff" stroke-width="0" fill-opacity="1" position="absolute"></circle>\n                          <path fill="#ffffff"\n                            d="M704 1152q-153 0 -286 -52t-211.5 -141t-78.5 -191q0 -82 53 -158t149 -132l97 -56l-35 -84q34 20 62 39l44 31l53 -10q78 -14 153 -14q153 0 286 52t211.5 141t78.5 191t-78.5 191t-211.5 141t-286 52zM704 1280q191 0 353.5 -68.5t256.5 -186.5t94 -257t-94 -257 t-256.5 -186.5t-353.5 -68.5q-86 0 -176 16q-124 -88 -278 -128q-36 -9 -86 -16h-3q-11 0 -20.5 8t-11.5 21q-1 3 -1 6.5t0.5 6.5t2 6l2.5 5t3.5 5.5t4 5t4.5 5t4 4.5q5 6 23 25t26 29.5t22.5 29t25 38.5t20.5 44q-124 72 -195 177t-71 224q0 139 94 257t256.5 186.5 t353.5 68.5zM1526 111q10 -24 20.5 -44t25 -38.5t22.5 -29t26 -29.5t23 -25q1 -1 4 -4.5t4.5 -5t4 -5t3.5 -5.5l2.5 -5t2 -6t0.5 -6.5t-1 -6.5q-3 -14 -13 -22t-22 -7q-50 7 -86 16q-154 40 -278 128q-90 -16 -176 -16q-271 0 -472 132q58 -4 88 -4q161 0 309 45t264 129 q125 92 192 212t67 254q0 77 -23 152q129 -71 204 -178t75 -230q0 -120 -71 -224.5t-195 -176.5z"\n                            transform="scale(.195, -.195) translate(600, -2000)"></path>\n                        </g>\n                      </svg>\n                    </span>\n                  </div>\n                </div>\n              </div>',this.stylesrc="\n              div#oibot_maindiv * {\n                box-sizing: content-box;\n                line-height: normal;\n              }\n              div#oibot_maindiv .Input * {\n                box-sizing: border-box;\n              }\n\n              #oibot_smallchat {\n                font-family: \"Lato\", sans-serif;\n                font-weight: normal;\n              }\n              .oibot_userrequest {\n                padding: 10px;\n                border-radius: 10px 0 10px 10px;\n                max-width: 75%;\n                margin-left: auto;\n                background-color: #141414;\n                color: #FFFFFF;\n                word-break: break-word;\n              }\n              .dark-mode .oibot_userrequest {\n                background-color: #FFFFFF;\n                color: #141414;\n              }\n\n              .sendbutton{\n                position:absolute;\n                right:14px;\n              }\n\n              #oibot_maindiv .tooltip {\n                position: relative;\n                display: inline-block;\n                opacity: 1;\n              }\n              #oibot_maindiv .tooltip .tooltiptext {\n                visibility: hidden;\n                margin-top:34px;\n                width: 41px;\n                background-color: #3080E2;\n                color: white;\n                text-align: center;\n                padding: 0 0;\n                position: absolute;\n                z-index: 1;\n              }\n              #oibot_maindiv .tooltip:hover .tooltiptext {\n                visibility: visible;\n              }\n\n              .chathead{\n                background-color: #e4e9f0;\n                background-size: cover;\n                border-radius: 45px;\n                width: 45px;\n                height: 45px;\n                display: inline-block;\n              }\n              #oibot_popup {\n                align-items: flex-end;\n                display: block;\n                flex-direction: column;\n                width: 100%;\n                max-width: 300px;\n                padding-top: 20px;\n                z-index: 10;\n              }\n              #oibot_popup {    \n                border:1px solid #3497db;\n                color: #3497db;\n                border-radius:13px;\n                box-sizing:border-box;\n                background-color:white;\n              box-shadow:0 5px 10px 0 #3497db;\n                max-width:290px;\n                padding:10px;\n                height:65px;\n                position: fixed;\n                font-size:17px;\n                right: 32px;\n                bottom: 108px;\n              }\n              #oibot_popup::after {\n                content:'';\n                width:20px;\n                height:20px;\n                border-radius:4px;\n                z-index:-1;\n                background-color:white;\n                position:absolute;\n                bottom:-6px;\n                right:11px;\n                transform:rotate(45deg);\n              }\n              #oibot_popup span {\n                display: inline-block;\n              }\n              #oibot_popup span.text {\n                width: calc(100% - 70px);\n                margin-left: 15px;\n              }\n\n              #oibot_maindiv {\n                font-size:15px;\n                font-style: normal;\n              }\n\n              #oibot_container {\n                display: flex;\n              }\n              .container_input {\n                width: calc(100% - 50px);\n                height: 30px;\n                margin-left: 10px;\n              }\n              .container_push {\n                width: 40px;\n                margin-top: 5px;\n              }\n\n              a {\n                font-size: 15px;\n              }\n              a:hover {\n                color: red;\n              }\n              a:link {\n                color: blue;\n              }\n              a:active {\n                color: blue;\n              }\n              a:visited {\n                color: blue;\n              }\n\n              .oibot_botresponse {\n                margin: 0px auto 0px 20px;\n                padding: 10px;\n                border-radius: 0 10px 10px 10px;\n                min-width: 60%;\n                max-width: 85%;\n                background-color: #F0F0F0;\n                color: #000000;\n                word-break: break-word;\n              }\n              .dark-mode .oibot_botresponse {\n                background-color: #a0a0a0;\n                color: #FFFFFF;\n              }\n              .botOptionResponse {\n                margin: 0px;\n              }\n              .optionbutton {\n                background-color: #3080E2;\n                color: #FFFFFF;\n                padding: 5px;\n                margin: 10px auto;\n                width: 80%;\n                border-radius: 20px;\n                text-align: center;\n                cursor: pointer;\n              }\n              .botSuggestionResponse {\n                width: 100%;\n                overflow-x: hidden;\n                overflow-y: hidden;\n\n                min-height: 60px;\n                margin: 5px auto 0 0px;\n                font-size: 14px;\n                font-style: italic;\n                position:relative;\n              }\n              .botError {\n                margin: 4px;\n                margin-left: 80px;\n                padding: 4px 10px 4px 10px;\n                border-radius: 4px;\n                text-align: right;\n                min-width: 60%;\n                max-width: 85%;\n                float: right;\n                background-color: #f77;\n              }\n              .sugbutton {\n                background-color: #7b8189; /* Green */\n                border: none;\n                color: white;\n                padding: 10px;\n                text-align: center;\n                text-decoration: none;\n                display: inline-block;\n                font-size: 17px;\n                margin: 4px 2px;\n                cursor: pointer;\n                border-radius: 25%;\n              }\n\n              #oibot_smallchat .messages, #oibot_smallchat .messages_list {\n                -webkit-box-flex: 1;\n                -webkit-flex-grow: 1;\n                -ms-flex-positive: 1;\n                flex-grow: 1;\n              }\n              #oibot_smallchat .messages p.botOptionResponse span {\n                display: block;\n              }\n              #oibot_smallchat .messages p.botSuggestionResponse span {\n                display: inline-block;\n              }\n              .chat_close_icon {\n                cursor:pointer;\n                color: #f77;\n                font-size:10px;\n              }\n              .chat_minimize_icon {\n                cursor:pointer;\n                color: #f77;\n                font-size:10px;\n                margin-right:15px;\n              }\n              .headertitle {\n                list-style:none;\n                display:list-item;\n                width:calc(100% - 60px);\n                cursor:pointer;\n                font-size:19px;\n              }\n              .headertitle .welcome {\n                margin-left: 85px;\n              }\n              .headertitle > span:last-child {\n                margin-left: 80px;\n                display: inline;\n              }\n              .headertitle .powered_by {\n                opacity: 0.8;\n                font-size:10px;\n              }\n              .headertitle .anc {\n                margin-left: 2px;\n                text-decoration:none;\n                color:#FFFFFF;\n                font-size:11px;\n                font-weight: bold;\n              }\n              .chat_on {\n                position: fixed;\n                z-index: 10;\n                width: 70px;\n                height: 70px;\n                right: 15px;\n                bottom: 20px;\n                background-color: #4286f4;\n                color: #fff;\n                border-radius: 50%;\n                text-align: center;\n                padding: 3px;\n                padding-top: 5px;\n                box-shadow: 0 2px 4px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12)!important;\n                cursor: pointer;\n                display: block;\n              }\n\n              #oibot_smallchat .layout {\n                pointer-events:auto;\n                box-sizing:content-box!important;\n                z-index:999999999;\n                position:fixed;\n                bottom:20px;\n\n                min-width:50px;\n                max-width:300px;\n                max-height:30px;\n                display:-webkit-box;\n                display:-webkit-flex;\n                display:-ms-flexbox;\n                display:flex;\n                -webkit-box-orient:vertical;\n                -webkit-box-direction:normal;\n                -webkit-flex-direction:column;\n                -ms-flex-direction:column;\n                flex-direction:column;\n                -webkit-box-pack:end;\n                -webkit-justify-content:flex-end;\n                -ms-flex-pack:end;\n                justify-content:flex-end;\n                border-radius:50px;\n                box-shadow:5px 0 20px 5px rgba(0,0,0,.1);\n                -webkit-animation:appear .15s cubic-bezier(.25,.25,.5,1.1);\n                animation:appear .15s cubic-bezier(.25,.25,.5,1.1);\n                -webkit-animation-fill-mode:forwards;\n                animation-fill-mode:forwards;\n                opacity:0;\n                -webkit-transition:right .1s cubic-bezier(.25,.25,.5,1),bottom .1s cubic-bezier(.25,.25,.5,1),min-width .2s\n                cubic-bezier(.25,.25,.5,1),max-width .2s cubic-bezier(.25,.25,.5,1),min-height .2s cubic-bezier(.25,.25,.5,1),max-height\n                .2s cubic-bezier(.25,.25,.5,1),border-radius 50ms cubic-bezier(.25,.25,.5,1) .15s,background-color 50ms\n                cubic-bezier(.25,.25,.5,1) .15s,color 50ms cubic-bezier(.25,.25,.5,1) .15s;\n                transition:right .1s cubic-bezier(.25,.25,.5,1),bottom .1s cubic-bezier(.25,.25,.5,1),min-width .2s\n                cubic-bezier(.25,.25,.5,1),max-width .2s cubic-bezier(.25,.25,.5,1),min-height .2s cubic-bezier(.25,.25,.5,1),max-height\n                .2s cubic-bezier(.25,.25,.5,1),border-radius 50ms cubic-bezier(.25,.25,.5,1) .15s,background-color 50ms\n                cubic-bezier(.25,.25,.5,1) .15s,color 50ms cubic-bezier(.25,.25,.5,1) .15s\n              }\n\n              #oibot_smallchat .layout-right {\n                right:20px;\n              }\n\n              #oibot_smallchat .layout-expand {\n                height:510px;\n                min-height:510px;\n                width: 380px;\n                min-width: 380px;\n                overflow: hidden;\n                display:none;\n              }\n              #oibot_smallchat .layout-mobile {\n                bottom:10px;\n              }\n              #oibot_smallchat .layout-mobile.layout-open {\n                width:calc(100% - 20px);\n                min-width:calc(100% - 20px);\n              }\n              #oibot_smallchat .layout-mobile.layout-expand {\n                bottom:0;\n                height:100%;\n                min-height:100%;\n                width:100%;\n                min-width:100%;\n                border-radius:0!important\n              }\n              @-webkit-keyframes appear {\n                0% {\n                  opacity:0;\n                  -webkit-transform:scale(0);\n                  transform:scale(0)\n                }\n                to {\n                  opacity:1;\n                  -webkit-transform:scale(1);\n                  transform:scale(1)\n                }\n              }\n              @keyframes appear {\n                0% {\n                  opacity:0;\n                  -webkit-transform:scale(0);\n                  transform:scale(0)\n                }\n                to {\n                  opacity:1;\n                  -webkit-transform:scale(1);\n                  transform:scale(1)\n                }\n              }\n              #oibot_smallchat .messenger_messenger {\n                position:relative;\n                height:100%;\n                width:100%;\n                min-width:300px;\n                -webkit-box-orient:vertical;\n                -webkit-box-direction:normal;\n                -webkit-flex-direction:column;\n                -ms-flex-direction:column;\n                flex-direction:column\n              }\n              #oibot_smallchat .messenger_header,#oibot_smallchat .messenger_messenger {\n                display:-webkit-box;\n                display:-webkit-flex;\n                display:-ms-flexbox;\n                display:inline-flex;\n              }\n              #oibot_smallchat .messenger_header {\n                -webkit-box-align:center;\n                -webkit-align-items:center;\n                -ms-flex-align:center;\n                align-items:center;\n                padding-left:10px;\n                padding-right:10px;\n                height:60px;\n                -webkit-flex-shrink:0;\n                -ms-flex-negative:0;\n                flex-shrink:0;\n                background-color: #3080E2;\n                color: #FFFFFF;\n              }\n\n\n              #oibot_smallchat .messenger_header h4 {\n                opacity:0;\n                font-size:16px;\n                -webkit-animation:slidein .15s .3s;\n                animation:slidein .15s .3s;\n                -webkit-animation-fill-mode:forwards;\n                animation-fill-mode:forwards;\n              }\n\n              #oibot_smallchat .messenger_prompt {\n                margin:0;\n                font-size:16px;\n                line-height:18px;\n                font-weight:400;\n                overflow:hidden;\n                white-space:nowrap;\n                text-overflow:ellipsis;\n              }\n\n              @-webkit-keyframes slidein {\n                0% {\n                  opacity:0;\n                  -webkit-transform:translateX(10px);\n                  transform:translateX(10px)\n                }\n                to {\n                  opacity:1;\n                  -webkit-transform:translateX(0);\n                  transform:translateX(0)\n                }\n              }\n              @keyframes slidein {\n                0% {\n                  opacity:0;\n                  -webkit-transform:translateX(10px);\n                  transform:translateX(10px)\n                }\n                to {\n                  opacity:1;\n                  -webkit-transform:translateX(0);\n                  transform:translateX(0)\n                }\n              }\n              #oibot_smallchat .messenger_content {\n                height: 450px;\n                background-color: #FFFFFF;\n                -webkit-box-flex: 1;\n                -webkit-flex-grow: 1;\n                -ms-flex-positive: 1;\n                flex-grow: 1;\n                display: -webkit-box;\n                display: -webkit-flex;\n                display: -ms-flexbox;\n                display: flex;\n                -webkit-box-orient: vertical;\n                -webkit-box-direction: normal;\n                -webkit-flex-direction: column;\n                -ms-flex-direction: column;\n                flex-direction: column;\n              }\n              #oibot_smallchat .messages {\n                position: relative;\n                -webkit-flex-shrink: 1;\n                -ms-flex-negative: 1;\n                flex-shrink: 1;\n                display: -webkit-box;\n                display: -webkit-flex;\n                display: -ms-flexbox;\n                display: flex;\n                -webkit-box-orient: vertical;\n                -webkit-box-direction: normal;\n                -webkit-flex-direction: column;\n                -ms-flex-direction: column;\n                flex-direction: column;\n                overflow-x: hidden;\n                overflow-y: auto;\n                padding: 10px;\n                -webkit-overflow-scrolling: touch;\n              }\n\n              #oibot_smallchat .Input {\n                position: relative;\n                width: 100%;\n                -webkit-box-flex: 0;\n                -webkit-flex-grow: 0;\n                -ms-flex-positive: 0;\n                flex-grow: 0;\n                -webkit-flex-shrink: 0;\n                -ms-flex-negative: 0;\n                flex-shrink: 0;\n                padding-top: 6px;\n                padding-bottom: 5px;\n                color: #96aab4;\n                background-color: #fff;\n                border-top: 1px solid #e6ebea;\n              }\n              #oibot_userinputdiv.Input {\n                height: 40px;\n              }\n              #oibot_smallchat .Input_field {\n                width: 92%;\n                resize: none;\n                border: none;\n                outline: none;\n                background-color: #F2F2F2;\n                color: #000000;\n                font-size: 16px;\n                border-radius: 10px;\n                padding: 10px;\n              }\n              #oibot_smallchat .Input_button-emoji {\n                right: 45px;\n              }\n              #oibot_smallchat .Input_button {\n                width: 30px;\n                height: 30px;\n                margin-top:-3px;\n                border-radius: 50%;\n                outline: none;\n                background-color: black;\n                cursor: pointer;\n              }\n              #oibot_smallchat .Input_button-send {\n                right: 15px;\n              }\n              #oibot_smallchat .Input-emoji .Input_button-emoji .Icon, #oibot_smallchat .Input_button:hover .Icon {\n                -webkit-transform: scale(1.1);\n                -ms-transform: scale(1.1);\n                transform: scale(1.1);\n                -webkit-transition: all .1s ease-in-out;\n                transition: all .1s ease-in-out;\n              }\n              #oibot_smallchat .Input-emoji .Input_button-emoji .Icon path, #oibot_smallchat .Input_button:hover .Icon path {\n                fill: #2c2c46;\n              }\n              .suggestionbutton {\n                background-color: #3080E2;\n                color: #FFFFFF;\n                text-align: center;\n                text-decoration: none;\n                margin:6px -13px;\n                margin-left:5%;\n                cursor: pointer;\n                border-radius: 16px;\n                text-transform: uppercase;\n                padding: 5px 30px;\n              }\n\n              .objectbutton {\n                margin: 4px 2px;\n                margin-left: 0;\n                padding: 5px 20px;\n              }\n              .suggestionbutton, .optionbutton {\n                border: 2px solid #3080E2;\n              }\n              .suggestionbutton:hover, .optionbutton:hover:not([disabled]), .optionbutton.selected {\n                background-color: #FFFFFF;\n                color: #3080E2;\n              }\n\n              .oibot_icon {\n                width: 18px;\n                height: 18px;\n              }\n\n\n              .typing-indicator {\n                background-color: #3080E2;\n                will-change: transform;\n                width: auto;\n                border-radius: 50px;\n                padding: 10px;\n                margin-left: 20px;\n                width: 40px;\n                position: relative;\n                -webkit-animation: 2s bulge infinite ease-out;\n                animation: 2s bulge infinite ease-out;\n              }\n              .typing-indicator::before, .typing-indicator::after {\n                content: '';\n                position: absolute;\n                bottom: -2px;\n                left: -2px;\n                height: 15px;\n                width: 15px;\n                border-radius: 50%;\n                background-color: #3080E2;\n              }\n              .typing-indicator::after {\n                height: 8px;\n                width: 8px;\n                left: -9px;\n                bottom: -9px;\n              }\n              .typing-indicator span {\n                height: 10px;\n                width: 10px;\n                float: left;\n                margin: 0 1px;\n                background-color: #FFFFFF;\n                display: block;\n                border-radius: 50%;\n                opacity: 0.4;\n              }\n              .typing-indicator span:nth-of-type(1) {\n                -webkit-animation: 1s blink infinite .3333s;\n                animation: 1s blink infinite .3333s;\n              }\n              .typing-indicator span:nth-of-type(2) {\n                -webkit-animation: 1s blink infinite .6666s;\n                animation: 1s blink infinite .6666s;\n              }\n              .typing-indicator span:nth-of-type(3) {\n                -webkit-animation: 1s blink infinite .9999s;\n                animation: 1s blink infinite .9999s;\n              }\n              .dark-mode .typing-indicator span {\n                background-color: #000000;\n              }\n\n              @keyframes blink {\n                50% {\n                  opacity: 1;\n                }\n              }\n              @keyframes bulge {\n                50% {\n                  transform: scale(1.05);\n                }\n              }\n\n\n              .circle {\n                border-radius:50%;\n              }\n              .outer {\n                display:table;\n                background-color:#3080E2;\n                width:25px;\n                height:25px;\n                position:relative;\n              }\n              .inner {\n\n                color:#FFFFFF;\n                top:4px;\n                font-size:16px;\n                left:6px;\n                width:50%;\n                height:50%;\n                position:absolute;\n              }\n\n              #oibot_closechat .closechat {\n                padding: 0 0 10px 10px;\n                font-size: 17px;\n                color: red;\n              }\n              #oibot_closechat .buttons {\n                padding-left:calc(100% - 245px);\n              }\n              #oibot_closechat .suggestionbutton {\n                margin: 4px 2px;\n                display: inline-block;\n                padding: 5px 20px;\n                font-size: 15px;\n                opacity: 1;\n              }\n\n              .mySlides {\n                position: relative;\n                min-height: 190px;\n                height: 190px;\n                margin-top:10px;\n                font-size: 13px;\n                overflow-x: hidden;\n                overflow-y: hidden;\n                display: grid;\n                grid-gap: 10px;\n                grid-auto-flow: column;\n                max-width:90%;\n                margin-left:20px;\n              }\n              .botSlidesNav {\n                position: relative;\n                margin-top: -5px;\n                margin-bottom: 0px;\n              }\n              .objectbutton.viewmore{\n                position:absolute;\n                font-size:13px;\n                right:0px;\n                top:75%;\n                width:35%;\n                height:15%;\n                border-radius:10px;\n              }\n              .prev, .next , .prev1, .next1{\n                cursor: pointer;\n                position: relative;\n                float: right;\n              }\n              .prev {\n                right: 70px;\n              }\n              .next {\n                right: -5px;\n              }\n              .prev1{\n               top:-10px;\n                left:10px;\n              }\n              .next1{\n                top:-7px;\n                right:-22px;\n              }\n              .roundedNav {\n                width:8px;\n\n                border-radius: 50%;\n                background-color: #000000;\n                padding: 8px 13px;\n              }\n\n              .roundedNav1 {\n                position:absolute;\n                color:black;\n                z-index:99;\n                padding: 8px 6px;\n                transform:translateX(-50%);\n              }\n              .suggestionrow{\n                  overflow-x:hidden;\n                  max-width:100%;\n                  white-space:nowrap;\n              }\n              .arrow {\n                position: relative;\n                width: 2.5rem;\n                height: 2.5rem;\n                display: inline-block;\n              }\n              .arrow::before, .arrow::after {\n                content:\"\";\n                position: absolute;\n                background: #FFFFFF;\n                border-radius: 0.2rem;\n                display: block;\n              }\n              .arrow.left, .arrow.right {\n                width: 9px;\n                height: 12px;\n              }\n              .arrow.left::before, .arrow.right::before {\n                top: 55%;\n              }\n              .arrow.left::after, .arrow.right::after {\n                bottom: 55%;\n              }\n              .arrow.left::before, .arrow.left::after, .arrow.right::before, .arrow.right::after {\n                left: -5%;\n                height: 25%;\n                width: 110%;\n              }\n              .arrow.left::before, .arrow.left::after {\n                transform: rotate(45deg);\n              }\n              .arrow.left::after {\n                transform: rotate(-45deg);\n              }\n              .arrow.right::before, .arrow.right::after {\n                transform: rotate(-45deg);\n              }\n              .arrow.right::after {\n                transform: rotate(45deg);\n              }\n              .carousel {\n                position:relative;\n                width: 160px;\n                height: 100%;\n                vertical-align: top;\n                border-radius: 10px;\n                background-color: #3080E2;\n                color: #FFFFFF;\n                cursor: pointer;\n                opacity: 0.5;\n              }\n              .carousel1 {\n                position:absolute;\n                width:100%;\n                height:70%;\n                border-radius: 14px;\n                background-color: #3080E2;\n                color: #FFFFFF;\n                cursor: pointer;\n                opacity: 0.5;\n              }\n              .carousel1 img {\n                height: 88%;\n                border-radius: 10px;\n                background-color: #FFFFFF;\n                width: 44%;\n                margin: 5px 0 0 5px;\n              }\n              .carousel1 span {\n                position:absolute;\n                width:50%;\n                margin-left: 5px;\n                display: inline-block;\n                font-weight: bold;\n                top:9px;\n                right:5px;\n              }\n              .carousel1 .circularchart{\n                position:absolute;\n                left:32%;\n              }\n              .carousel1.active {\n                opacity: 1.0;\n              }\n              .carousel1 .circularchart{\n                left:30%;\n                text-align:center;\n              }\n              .carousel1 img {\n                height: 88%;\n                border-radius: 10px;\n                background-color: #FFFFFF;\n                width: 44%;\n                margin: 5px 0 -35px 5px;\n              }\n\n              .carousel.active {\n                opacity: 1.0;\n              }\n              .carousel img {\n                height: 100px;\n                border-radius: 10px;\n                background-color: #FFFFFF;\n                width: 94%;\n                margin: 5px 0 0 5px;\n              }\n              .carousel span {\n                margin-left: 5px;\n                display: inline-block;\n                font-weight: bold;\n                margin-top: 5px;\n                vertical-align: top;\n              }\n              .circularchart {\n                display: block;\n                position:absolute;\n                border-radius:10px;\n                top:2px;\n                right:10px;\n                font-size:11px;\n                max-width: 30px;\n    //            background-color:#FF7F50;\n                background-image: linear-gradient(174deg, #AFE78F 0%, #77CB56 100%);\n                max-height: 30px;\n                padding: 5px;\n              }\n              .circle1 {\n                stroke: #ef8b00;\n                fill: none;\n                stroke-width: 2.8;\n                stroke-linecap: round;\n                animation: progress 1s ease-out forwards;\n              }\n              .mySlides.fadeSlide {\n                -webkit-animation-name: fade;\n                -webkit-animation-duration: 1.5s;\n                animation-name: fade;\n                animation-duration: 1.5s;\n                transition: none;\n              }\n\n              @-webkit-keyframes fade {\n                from {opacity: .4}\n                to {opacity: 1}\n              }\n              @keyframes fade {\n                from {opacity: .4}\n                to {opacity: 1}\n              }\n\n              .mySlides.product {\n                font-size: 14px;\n                min-height: 110px;\n                height: 110px;\n                overflow-x: auto;\n              }\n              .mySlides.product .carousel {\n                width: 100%;\n                height: 110px;\n                cursor: initial;\n                background-color:black;\n                color:white;\n              }\n              .mySlides.product .carousel1 {\n                width: 100%;\n                height: 110px;\n                cursor: initial;\n                background-color:black;\n                color:white;\n              }\n              .mySlides.product .carousel1 .viewmore{\n                display:none;\n              }\n\n             .dark-mode .mySlides.product .carousel {\n                width: 100%;\n                height: 110px;\n                cursor: initial;\n                background-color:#a0a0a0;\n                color:white;\n              }\n              .mySlides.product .carousel img {\n                height: 85%;\n                width: 32%;\n                margin: 7px 0 0 10px;\n              }\n\n              .mySlides.product .carousel1 img {\n                height: 85%;\n                width: 32%;\n                margin: 7px 0 0 10px;\n              }          .myslides.product .rating{\n               display:none;\n             }\n              .mySlides.product .carousel span {\n                width: calc(64% - 20px);\n                margin-left: 10px;\n                margin-top: 10px;\n              }\n              .mySlides.product .carousel1 span {\n                width: calc(64% - 20px);\n                margin-left: 10px;\n                margin-top: 10px;\n              }\n              .mySlides.product .circularchart {\n                top:-1px;\n                left:55px;\n                text-align:center;\n              }\n              .mySlides.product .botslidesnav{\n                  position: relative;\n                  margin-top: -5px;\n                  margin-bottom: 0px;\n              }\n\n              div.stars {                \n                width: 303px;\n                display: inline-block;\n                transition: .1s all ease;\n\n              }\n              div.stars.clicked{\n                transition:0.6s;\n              }\n\n              .hail{\n                margin-top:30px;\n                font-size:14px;\n                font-weight:bold;\n                margin-left:39px;\n              }\n              input.star { display: none; }\n\n              label.star {\n                cursor:pointer;\n                float: right;\n                padding: 10px;\n                width : 35px;\n                color: #444;\n                transition: all .2s;\n              }\n\n              input.star:checked ~ label.star:before {\n                transition: all .25s;\n                background-image: url('"+this.assetsUrl+"star-gold.png');\n                background-size: 40px 40px;\n                display: inline-block;\n                width: 40px;\n                height: 40px;\n                content: \"\";\n              }\n\n\n              input.star-5:checked ~ label.star:before {\n                color: #ffe52c;\n                text-shadow: 0 0 20px #952;\n              }\n\n              input.star-1:checked ~ label.star:before { color: #F62; }\n\n\n              label.star:not([disabled]):hover { transform: rotate(-15deg) scale(1.3);}\n\n              label.star:before {\n                transition: all .25s;\n                background-image: url('"+this.assetsUrl+'star-white.png\');\n                background-size: 40px 40px;\n                display: inline-block;\n                width: 40px;\n                height: 40px;\n                content:"";\n              }\n\n              .dark-mode {\n                background-color: black;\n                color: white;\n              }\n              @media only screen and (min-width:320px)and (max-width:375px){\n                #oibot_minimize{\n                  display:none;\n                }\n                #oibot_smallchat .layout-right {\n                  right:1px;\n                }\n                .headertitle{\n                  font-size:13px;\n                }\n                #oibot_popup{\n                  max-width:255px;\n                }\n                .headertitle .welcome {\n                  margin-left: 37%;\n                }\n                .headertitle > span:last-child {\n                  margin-left: 18%;\n                  display: inline;\n                }\n                #oibot_smallchat .messenger_header {\n                  align-items:center;\n                  padding-left:17px;\n                  padding-right:20px;\n                  height:40px;\n                }\n                #oibot_smallchat .layout-expand {\n                  min-height:97%;\n                  min-width: 100%;\n                  overflow: hidden;\n                }\n                .mySlides.product .circularchart {\n                  top:0px;\n                  left:17%;\n                }\n                .tooltip:hover .tooltiptext {\n                  visibility: hidden;\n                }\n                .div.stars {\n                    width: 303px;\n                    display: inline-block;\n                    transition: .1s all ease;\n                    margin-left: 0px;\n                }\n\n              }\n\n              @media only screen and (min-width:410px) and (max-width:414px){\n                #oibot_minimize{\n                  display:none;\n                }\n                #oibot_smallchat .layout-right {\n                  right:1px;\n                }\n                .headertitle{\n                  font-size:13px;\n                }\n                .headertitle .welcome {\n                  margin-left: 39%;\n                }\n                #oibot_smallchat .messenger_header {\n                  align-items:center;\n                  padding-left:33px;\n                  padding-right:20px;\n                  height:40px;\n                }\n                #oibot_smallchat .layout-expand {\n\n                  min-height:97%;\n                  min-width: 100%;\n\n                  overflow: hidden;\n                }\n                .mySlides.product .circularchart {\n                  top:0px;\n                  left:20%;\n                }\n                .tooltip:hover .tooltiptext {\n                  visibility: hidden;\n                }\n                .div.stars {\n                    width: 303px;\n                    display: inline-block;\n                    transition: .1s all ease;\n                    margin-left: 15px;\n                }\n              }\n              @media only screen and (min-width:750px) and (max-width:770px){\n                #oibot_minimize{\n                  display:none;\n                }\n                #oibot_smallchat .layout-right {\n                  right:1px;\n                }\n                .headertitle{\n                  font-size:13px;\n                }\n                .headertitle .welcome {\n                  margin-left: 39%;\n                }\n                .headertitle > span:last-child {\n                  margin-left: 30%;\n                  display: inline;\n                }\n                #oibot_smallchat .messenger_header {\n                  align-items:center;\n                  padding-left:10%;\n                  padding-right:20px;\n                  height:40px;\n                }\n                #oibot_smallchat .layout-expand {\n\n                  min-height:70%;\n                  min-width: 70%;\n\n                  overflow: hidden;\n                }\n                .botSuggestionResponse {\n\n                  font-size: 20px;\n\n                }\n                .mySlides.product .circularchart {\n                  top:0px;\n                  left:20%;\n                }\n                .tooltip:hover .tooltiptext {\n                  visibility: hidden;\n                }\n                .div.stars {\n                    width: 303px;\n                    display: inline-block;\n                    transition: .1s all ease;\n                  padding-left:10%\n                }\n              }\n\n             .rating{\n               width:200px;\n               display:inline;\n               font-weight:bold;\n               font-size:12px;\n               margin-left:22px;\n               margin-top:15px;\n                margin-bottom:10px;\n               color:white;    \n               background-image: linear-gradient(174deg, #AFE78F 0%, #77CB56 100%);\n               padding: 5px;\n               border-radius: 10px;\n             }\n             \n            ',this.loadUIdesign=function(){var d=this;if(document.getElementById("oibot_maindiv"))return!1;this.maindiv.setAttribute("id","oibot_maindiv"),setTimeout(function(){d.onChatClick()},4e4);var n=window.localStorage.getItem("isFromStorage"),e=window.localStorage.getItem("history"),t=window.localStorage.getItem("session");if(n&&e&&t?(this.botUserId=n,this.maindiv.innerHTML=decodeURIComponent(escape(window.atob(e))),this.sessionAttributes=JSON.parse(decodeURIComponent(escape(window.atob(t))))):(this.botUserId="chatbot-JS"+(new Date).getTime(),this.maindiv.innerHTML=this.chatHTML),document.addEventListener("readystatechange",function(n){if(n.target.readyState,"complete"===n.target.readyState){document.body.appendChild(d.maindiv),d.init(),d.bindEvents(),document.getElementById("oibot_script_aws")&&document.getElementById("oibot_script_aws").remove();var e=document.createElement("script");if(e.src="https://sdk.amazonaws.com/js/aws-sdk-2.41.0.min.js",e.id="oibot_script_aws",e.onload=function(){AWS.config.region="us-east-1",AWS.config.credentials=new AWS.CognitoIdentityCredentials({IdentityPoolId:"us-east-1:10159bc8-c7b5-443c-a6e1-3a795c0ab408"})},d.maindiv.appendChild(e),window.localStorage.getItem("isFromStorage")){document.getElementById("oibot_chaton").click();for(var t=document.getElementById("oibot_conversation"),i=document.getElementsByClassName("suggestionbutton"),o=0;o<i.length;o++)i[o].addEventListener("click",function(){this.classList.contains("close")||d.newfunction(this)});for(var s=document.getElementsByClassName("prev1"),a=0;a<s.length;a++)s[a].addEventListener("click",function(){document.getElementById("oibot_suggrow").scrollBy(-300,0)});for(var r=document.getElementsByClassName("next1"),l=0;l<s.length;l++)r[l].addEventListener("click",function(){document.getElementById("oibot_suggrow").scrollBy(300,0)});t.scrollTop=t.scrollHeight}d.removeStorage()}}),!document.getElementById("oibot_style_common")){var i=document.createElement("style");i.type="text/css",i.id="oibot_style_common",i.innerHTML=this.stylesrc,this.maindiv.appendChild(i)}},this.init=function(){document.getElementById("oibot_closechat").style.display="none";var n=sessionStorage.getItem("pagevisit");null==n&&(n=0),location.href.includes("mattress")&&4==++n&&this.onChatClick(),sessionStorage.setItem("pagevisit",n);var e=document.getElementsByClassName("botSlides");if(e&&e.length)for(var t=0;t<e.length;t++){var i=e[t],o=i.getElementsByClassName("carousel active"),s=null;o.length?s=o[0]:!o.length&&i.childNodes.length&&(s=i.querySelector(".carousel")).classList.add("active"),s&&this.showSlides(parseInt(s.getAttribute("slide"))+1,t)}var a=document.getElementsByClassName("stars").length-1,r=document.querySelectorAll("label.star:not([disabled])");if(r&&r.length&&-1<a)for(var l=0;l<r.length;l++)r[l].addEventListener("click",function(){if(!this.getAttribute("disabled")){document.getElementsByClassName("ng-"+a)[0].style.display="none",document.getElementsByClassName("greet-"+a)[0].style.display="block",document.getElementById("starform-"+a).style.pointerEvents="none";var n=document.querySelectorAll("label.star:not([disabled])");if(n&&n.length)for(var e=0;e<n.length;e++)n[e].setAttribute("disabled","")}})},this.bindEvents=function(){var e=this,n=document.getElementById("oibot_minimize");document.getElementById("oibot_light").addEventListener("click",function(n){e.darkmode()}),[n,document.getElementById("oibot_headertitle")].forEach(function(n){n.addEventListener("click",function(n){"none"==document.getElementById("oibot_messenger_content").style.display?e.onMaximizeClick():e.onMinimizeClick()})}),document.getElementById("oibot_closeicon").addEventListener("click",function(n){e.onCloseClick()}),document.getElementById("oibot_userinput").addEventListener("keyup",function(n){13===n.keyCode&&(n.preventDefault(),document.getElementById("oibot_pushchat").click())}),document.getElementById("oibot_pushchat").addEventListener("click",function(n){e.pushChat()}),document.getElementById("oibot_chaton").addEventListener("click",function(n){e.onChatClick()}),document.getElementById("oibot_okdiv").addEventListener("click",function(n){e.onOkClick()}),document.getElementById("oibot_canceldiv").addEventListener("click",function(n){e.onCancelClick()})},this.pushChat=function(){var n=document.getElementById("oibot_userinput");if(null==n||null==n.value||0==n.value.trim().length||n.disabled)return!1;var e=n.value.trim();n.value="...",n.disabled=!0,this.showRequest(e),this.sendRequest(e)},this.sendRequest=function(n,e,s){var a=this,t=null;try{t=new AWS.LexRuntime}catch(n){var i=document.getElementById("oibot_userinput");i.value="",i.disabled=!1;for(var o=document.getElementsByClassName("optionbutton"),r=0;r<o.length;r++)o[r].setAttribute("done","true"),o[r].setAttribute("disabled","");a.showError("No internet connection please check your connectivity")}var l=this.sessionAttributes;e&&(l=e);var d=n.trim();l.isProduct&&!l.curProductId&&(d="Product A"),delete l.curProductId,delete l.isProduct,l.agent=navigator.userAgent;var c={botAlias:"Mattressalias",botName:"Mattress_bot",inputText:d,userId:this.botUserId,sessionAttributes:l};t.postText(c,function(n,e){var t=document.getElementById("oibot_userinput");t.value="",t.disabled=!1;for(var i=document.getElementsByClassName("optionbutton"),o=0;o<i.length;o++)i[o].setAttribute("done","true"),i[o].setAttribute("disabled","");if(n)return n.statusCode?a.showError("Error:  Please try again"):a.showError("No internet connection please check your connectivity"),s&&s(!1),!1;e&&("ElicitIntent"==e.dialogState&&(delete e.sessionAttributes.buttons,delete e.sessionAttributes.messages,delete e.sessionAttributes.slides,delete e.sessionAttributes.suggestionsObj,delete e.sessionAttributes.suggestions),e.sessionAttributes.skipResponse||(a.sessionAttributes=e.sessionAttributes,a.showResponse(e))),s&&s(!0)})},this.showRequest=function(n){n&&this.sessionAttributes.isSecure&&(n=n.substring(0,n.length/2)+"X".repeat(n.length/2));var e=document.getElementById("oibot_conversation"),t=document.createElement("P");t.className="oibot_userrequest",t.appendChild(document.createTextNode(n)),e.appendChild(t),e.scrollTop=e.scrollHeight;var i=document.createElement("DIV");i.setAttribute("id","oibot_typingindicator"),i.className="typing-indicator";var o=document.createElement("span");i.appendChild(o);var s=document.createElement("span");i.appendChild(s);var a=document.createElement("span");i.appendChild(a),e.appendChild(i),e.scrollTop=e.scrollHeight},this.showError=function(n){var e=document.getElementById("oibot_conversation"),t=document.createElement("P");t.className="botError",t.appendChild(document.createTextNode(n)),e.appendChild(t),e.scrollTop=e.scrollHeight,document.getElementById("oibot_typingindicator")&&document.getElementById("oibot_typingindicator").remove()},this.showPlainText=function(n,e){var t=document.getElementById("oibot_conversation"),i=document.createElement("DIV");i.className="circle outer";var o=document.createElement("DIV");o.className="circle inner";var s=document.createTextNode("G");o.appendChild(s),i.appendChild(o);var a=document.createElement("P");if(a.className="oibot_botresponse",null!=n&&null!=n){var r=n.split("htt");if(a.appendChild(document.createTextNode(r[0])),a.appendChild(document.createElement("br")),r[1]){var l=document.createElement("A"),d=document.createTextNode("htt"+r[1]);l.setAttribute("href","htt"+r[1]),l.setAttribute("target","_blank"),l.appendChild(d),a.appendChild(l)}}e?a.style.marginTop="6px":t.appendChild(i),t.appendChild(a),t.scrollTop=t.scrollHeight},this.showButtons=function(n){var i=this,e=document.getElementById("oibot_conversation"),t=document.createElement("P");for(var o in t.className="botOptionResponse",n){var s=document.createElement("span"),a=n[o];s.innerHTML=a.name,a.id?s.setAttribute("value",a.id):a.value&&s.setAttribute("value",a.value),s.className="optionbutton",s.addEventListener("click",function(){if(!this.getAttribute("done")){var n=this.innerText,e=i.sessionAttributes;this.getAttribute("value")&&(e.id=this.getAttribute("value"));var t=document.getElementById("oibot_userinput");t.value="...",t.disabled=!0,i.showRequest(n),i.sendRequest(n,e),this.classList.add("selected")}}),t.appendChild(s)}e.appendChild(t),e.scrollTop=e.scrollHeight},this.showSuggestions=function(n){var e=this,t=document.getElementById("oibot_conversation"),i=document.createElement("P");for(var o in i.setAttribute("id","oibot_suggestions"),i.className="botSuggestionResponse",n){var s=document.createElement("span");s.innerHTML=n[o],s.className="suggestionbutton",s.addEventListener("click",function(){var n=this.innerHTML;document.getElementById("oibot_suggestions")&&document.getElementById("oibot_suggestions").remove(),e.showRequest(n),e.sendRequest(n)}),i.appendChild(s)}t.appendChild(i),t.scrollTop=t.scrollHeight},this.showSuggestionsObj=function(i){var o=this,n=document.getElementById("oibot_conversation"),e=document.createElement("P");e.setAttribute("id","oibot_suggestions"),e.className="botSuggestionResponse";var t=document.createElement("span");t.className="roundedNav1 prev1",t.id="p1";var s=document.createElement("img");s.style.width="20px",s.src=this.assetsUrl+"suggestion-left.png",t.appendChild(s);var a=document.createElement("span");a.className="roundedNav1 next1",a.id="n1";var r=document.createElement("img");r.style.width="20px",r.src=this.assetsUrl+"suggestion-right.png",a.appendChild(r);var l=document.createElement("span");l.className="suggestionrow",l.id="oibot_suggrow",e.appendChild(t),e.appendChild(a),window.onscroll=function(){window.scrollTo(0,0)},t.addEventListener("click",function(){document.getElementById("oibot_suggrow").scrollBy(-300,0)}),a.addEventListener("click",function(){document.getElementById("oibot_suggrow").scrollBy(300,0)});function d(n){var e=i[n],t=document.createElement("span");t.innerHTML=e.name,t.className="suggestionbutton objectbutton",e.id&&t.setAttribute("value",e.id),e.link&&t.setAttribute("link",e.link),e.isAjax&&t.setAttribute("isAjax",e.isAjax),t.addEventListener("click",function(){o.newfunction(t)}),l.appendChild(t)}for(var c in i)d(c);e.appendChild(l),n.appendChild(e),l.scrollWidth<300&&(e.removeChild(t),e.removeChild(a)),n.scrollTop=n.scrollHeight},this.newfunction=function(n){var a=this;delete a.sessionAttributes.isProduct;var r=n.innerHTML,e=!1,t=n.getAttribute("value"),l=n.getAttribute("link"),i=n.getAttribute("isAjax"),o=a.sessionAttributes,s=null,d=null,c=null,p=null,u=document.getElementById("oibot_suggestions");if((u=u&&u.previousSibling)&&!u.classList.contains("mySlides")&&(u=u.previousSibling),(u=u&&u.getElementsByClassName("carousel active"))&&u.length){var m=u[0].querySelector(".title");m&&(s=m.getAttribute("value"),d=m.getAttribute("variationid"),c=m.getAttribute("url"),p=m.innerHTML.split("<")[0])}if(t&&(o.id=t),"{product}"==l&&a.sessionAttributes.productUrl?l=a.sessionAttributes.productUrl:"{product}"==l&&c&&(l=c,a.sessionAttributes.curProductId=c,o.id=s,o.productName=p,o.variationId=d),i&&a.sessionAttributes.productId){var h={product_id:a.sessionAttributes.productId,quantity:1};d?h.variation_id=d:a.sessionAttributes.variationId&&(h.variation_id=a.sessionAttributes.variationId);var g=new XMLHttpRequest;g.onreadystatechange=function(){4===g.readyState&&a.sendRequest(r,o,f)},g.open("POST",i),g.setRequestHeader("Content-Type","application/json"),g.send(JSON.stringify(h))}else if(i&&!a.sessionAttributes.productId&&s){var b={product_id:s,quantity:1};d&&(b.variation_id=d);var x=new XMLHttpRequest;x.onreadystatechange=function(){4===x.readyState&&a.sendRequest(r,o,f)},x.open("POST",i),x.setRequestHeader("Content-Type","application/json"),x.send(JSON.stringify(b)),a.sessionAttributes.curProductId=s,o.id=s,o.productName=p,o.variationId=d}else e=!0;document.getElementById("oibot_suggestions")&&document.getElementById("oibot_suggestions").remove();var f=null;l&&(f=function(n){var e=document.getElementById("oibot_maindiv").cloneNode(!0),t=String(e.innerHTML).replace(/\n|\r|\s{2,}/g,""),i=window.btoa(unescape(encodeURIComponent(t))),o=String(JSON.stringify(a.sessionAttributes)).replace(/\n|\r|\s{2,}/g,""),s=window.btoa(unescape(encodeURIComponent(o)));window.localStorage.setItem("history",i),window.localStorage.setItem("isFromStorage",a.botUserId),window.localStorage.setItem("session",s),"See more details"==r?window.open(l,"_self"):window.open(l,"_blank")}.bind(this)),a.showRequest(r),e&&a.sendRequest(r,o,f)},this.showResponse=function(n){var e=this;document.getElementById("oibot_typingindicator")&&document.getElementById("oibot_typingindicator").remove(),document.getElementById("oibot_suggestions")&&document.getElementById("oibot_suggestions").remove();var t=document.getElementsByClassName("viewmore");t.length&&(t[t.length-1].disabled="true");var i=null,o=!1;if(n&&n.sessionAttributes){var s=n.sessionAttributes;s.messages&&(i=JSON.parse(s.messages))&&i.forEach(function(n){n.isbefore&&(e.showPlainText(n.text,o),o=!0)})}if(n&&n.message&&(this.showPlainText(n.message,o),o=!0),n&&n.sessionAttributes){var a=n.sessionAttributes;if(i&&i&&i.forEach(function(n){n.isbefore||e.showPlainText(n.text,o)}),a.slides){var r=JSON.parse(a.slides);this.showcarousel(r)}else if(a.buttons){var l=JSON.parse(a.buttons);this.showButtons(l)}if(a.suggestionsObj){var d=JSON.parse(a.suggestionsObj);this.showSuggestionsObj(d)}else if(a.suggestions){var c=JSON.parse(a.suggestions);this.showSuggestions(c)}a.showRating&&this.showRating()}},this.removeStorage=function(){window.localStorage.removeItem("history"),window.localStorage.removeItem("isFromStorage"),window.localStorage.removeItem("session")},this.onChatClick=function(){var n=document.getElementsByClassName("layout")[0],e=document.getElementById("oibot_chaton"),t=document.getElementById("oibot_popup");if("none"==n.style.display||""==n.style.display){e.style.display="none",t.style.display="none",n.style.display="block";var i={suggestions:["Yes","Maybe later"]},o={};i.messages=JSON.stringify(this.initialChatScript),i.suggestions=JSON.stringify(i.suggestions),o.sessionAttributes=i,this.showResponse(o)}},this.onCloseClick=function(){if(this.removeStorage(),!document.getElementsByClassName("oibot_userrequest").length)return this.onOkClick(),!0;var n=document.getElementsByClassName("layout")[0],e=document.getElementById("oibot_messenger_content"),t=document.getElementById("oibot_chaton"),i=document.getElementById("oibot_popup");document.getElementById("oibot_closechat").style.display="block",document.getElementById("oibot_userinputdiv").style.display="none",t.style.display="none",i.style.display="none",n.style.display="block",n.style.minHeight="",e.style.display=null},this.onMinimizeClick=function(){var n=document.getElementsByClassName("layout")[0],e=document.getElementById("oibot_messenger_content"),t=document.getElementById("oibot_chaton"),i=document.getElementById("oibot_popup");t.style.display="none",i.style.display="none",n.style.minHeight="60px",e.style.display="none"},this.onMaximizeClick=function(){var n=document.getElementsByClassName("layout")[0],e=document.getElementById("oibot_messenger_content"),t=document.getElementById("oibot_chaton"),i=document.getElementById("oibot_popup");t.style.display="none",i.style.display="none",n.style.minHeight=null,e.style.display=null},this.removeallchildnode=function(n){for(var e=document.getElementById(n).childNodes,t=e.length-1;0<=t;t--){e[t].remove()}},this.onOkClick=function(){document.getElementById("oibot_closechat").style.display="none",document.getElementById("oibot_userinputdiv").style.display="block",this.removeallchildnode("oibot_conversation");var n=document.getElementsByClassName("layout")[0],e=document.getElementById("oibot_messenger_content"),t=document.getElementById("oibot_chaton"),i=document.getElementById("oibot_popup");n.style.display="none",n.style.minHeight="",t.style.display="block",i.style.display="block",e.style.display=null,this.botUserId="chatbot-JS"+(new Date).getTime(),this.sessionAttributes={}},this.onCancelClick=function(){document.getElementById("oibot_closechat").style.display="none",document.getElementById("oibot_userinputdiv").style.display="block"},this.showcarousel=function(n){var i=this;this.slideIndex.push(1);var o=document.getElementsByClassName("botSlides").length,s=document.getElementById("oibot_conversation"),e=document.createElement("p");e.id="tr",e.className="rating";var t=document.createTextNode("Expert Rating From Goodbed.com");e.appendChild(t),n.length&&s.appendChild(e);var a=document.createElement("P");if(a.setAttribute("id",this.slideDivId+o),a.className="botSlides mySlides fadeSlide",1<n.length){var r=document.createElement("SPAN"),l=n[0];r.id="single_"+o;var d=document.createElement("span");d.className="carousel1 active";var c=document.createElement("img");c.src=l.images[0]||l.image;var p=l.name,u=document.createElement("span");u.innerHTML=p,u.className="title",l.id&&u.setAttribute("value",l.id),l.permalink&&u.setAttribute("url",l.permalink),l.variation_id&&u.setAttribute("variationid",l.variation_id);var m=document.createElement("button");m.className="suggestionbutton viewmore objectbutton",m.addEventListener("click",function(){document.getElementById("single_"+o).style.display="none",document.getElementById(i.slideDivId+o).style.display="inline-grid";var n=this.closest(".botSlides");n.nextSibling.style.display="block";for(var e=n.getElementsByClassName("carousel"),t=0;t<e.length;t++)e[t].style.display="block";s.scrollTop=s.scrollHeight});var h=document.createTextNode("View More Products");m.appendChild(h);var g=document.createElement("span");g.className="circularchart";var b=document.createTextNode(l.rating+"%");g.appendChild(b),d.appendChild(c),d.appendChild(u),d.appendChild(g),d.addEventListener("click",function(){if(this.parentNode.classList.contains("product"))return!1;this.classList.contains("active")||i.showSlides(parseInt(this.getAttribute("slide"))+1,o);var n=this.childNodes[1],e=n.innerHTML.split("<")[0],t=i.sessionAttributes;n.getAttribute("value")&&(t.id=n.getAttribute("value"),t.productName=e),n.getAttribute("variationid")&&(t.variationId=n.getAttribute("variationid")),document.getElementById(i.slideDivId+o).classList.add("disabled"),i.showRequest(e),i.sendRequest(e,t)}),r.appendChild(d),r.appendChild(m),a.appendChild(r)}for(var x in n){var f=document.createElement("span");f.setAttribute("slide",x),f.className="carousel fadeSlide",i.sessionAttributes.productId||(f.style.display="none");var v=document.createElement("img");v.src=n[x].images[0]||n[x].image;var y=document.createElement("span"),w=n[x].name;if(n[x].warranty&&(a.style.display="none",w+="<br> Warranty: "+n[x].warranty),n[x].description){var k=n[x].description;80<k.length&&(k=k.slice(0,80)+"..."),w+=k}y.innerHTML=w,y.className="title",n[x].id&&y.setAttribute("value",n[x].id),n[x].permalink&&y.setAttribute("url",n[x].permalink),n[x].variation_id&&y.setAttribute("variationid",n[x].variation_id);var _=document.createElement("span");_.className="circularchart";var E=document.createTextNode(n[x].rating+"%");_.appendChild(E),f.appendChild(v),f.appendChild(y),f.appendChild(_),f.addEventListener("click",function(){if(this.parentNode.classList.contains("product"))return!1;this.classList.contains("active")||i.showSlides(parseInt(this.getAttribute("slide"))+1,o);var n=this.childNodes[1],e=n.innerHTML.split("<")[0],t=i.sessionAttributes;n.getAttribute("value")&&(t.id=n.getAttribute("value"),t.productName=e),n.getAttribute("variationid")&&(t.variationId=n.getAttribute("variationid")),document.getElementById(i.slideDivId+o).classList.add("disabled"),i.showRequest(e),i.sendRequest(e,t)}),a.appendChild(f),s.appendChild(a)}if(document.onkeydown=function(n){39==n.keyCode?i.plusSlides(1,o):37==n.keyCode&&i.plusSlides(-1,o)},s.appendChild(a),1<n.length){var I=document.createElement("span");I.className="roundedNav prev";var C=document.createElement("img");C.src=this.assetsUrl+"slider-left.png",C.style.width="10px",I.appendChild(C);var F=document.createElement("span");F.className="roundedNav next";var B=document.createElement("img");B.src=this.assetsUrl+"slider-right.png",B.style.width="10px",F.appendChild(B),I.addEventListener("click",function(){i.plusSlides(-1,o)}),F.addEventListener("click",function(){i.plusSlides(1,o)});var N=document.createElement("P");N.className="botSlidesNav",N.appendChild(I),N.appendChild(F),N.style.display="none",s.appendChild(N),this.sessionAttributes.isProduct=!0}else i.sessionAttributes.productId&&document.getElementById(this.slideDivId+o).classList.add("product");document.getElementById(this.slideDivId+o).getElementsByClassName("carousel")&&document.getElementById(this.slideDivId+o).getElementsByClassName("carousel")[0].classList.add("active"),s.scrollTop=s.scrollHeight},this.plusSlides=function(n,e){if(document.getElementById(this.slideDivId+e).classList.contains("disabled"))return!1;this.showSlides(this.slideIndex[e]+=n,e)},this.showSlides=function(n,e){var t=document.getElementById(this.slideDivId+e),i=t.getElementsByClassName("carousel");(this.slideIndex[e]=n)>i.length&&(this.slideIndex[e]=1),n<1&&(this.slideIndex[e]=i.length);for(var o=0;o<i.length;o++)i[o].classList.remove("active");i[this.slideIndex[e]-1].classList.add("active"),1<this.slideIndex[e]?(t.scrollLeft=100,t.scrollLeft+=170*(this.slideIndex[e]-2)):t.scrollLeft=0},this.showRating=function(){var n=this,e=document.getElementsByClassName("stars").length,t=document.getElementById("oibot_conversation"),i=document.createElement("div");i.id="stardiv",i.className="stars";var o=document.createElement("form");o.id="starform-"+e;for(var s=5,a=[],r=[],l=1;l<=5;l++,s--)a[l]=document.createElement("input"),a[l].name="rate",a[l].type="radio",a[l].id="star-"+e+"-"+s,a[l].className="star star-"+e+"-"+s,a[l].addEventListener("change",function(){this.getAttribute("disabled")||n.sendRating(this.id.split("-")[2])}),o.appendChild(a[l]),r[l]=document.createElement("label"),r[l].htmlFor="star-"+e+"-"+s,r[l].className="star star-"+e+"-"+s,r[l].addEventListener("click",function(){if(!this.getAttribute("disabled")){var n=document.getElementsByClassName("stars").length;n--,document.getElementsByClassName("ng-"+n)[0].style.display="none",document.getElementsByClassName("greet-"+n)[0].style.display="block",o.style.pointerEvents="none";var e=document.querySelectorAll("label.star:not([disabled])");if(e&&e.length)for(var t=0;t<e.length;t++)e[t].setAttribute("disabled","")}}),o.appendChild(r[l]);var d=document.createTextNode("How do you rate this chat experience?"),c=document.createElement("p");c.className="hail ng-"+e,c.appendChild(d);var p=document.createTextNode("Thank you, your feedback is noted. Have a good day."),u=document.createElement("p");u.style.fontSize="14px",u.className="hail greet-"+e,u.appendChild(p),u.style.display="none",i.appendChild(c),i.appendChild(o),i.appendChild(u),t.appendChild(i),t.scrollTop=t.scrollHeight},this.sendRating=function(n){var e=this.sessionAttributes;e.israted=n;this.sendRequest("Rating is stored",e)},this.darkmode=function(){document.getElementById("oibot_conversation").classList.toggle("dark-mode")},this.getLocation=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(n){n.coords.latitude,n.coords.longitude})}}var e;return{getInstance:function(){return e||delete(e=new n).constructor,e}}}(),botUI=new botFactory.getInstance;botUI.loadUIdesign();